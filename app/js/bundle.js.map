{"version":3,"sources":["main.js","ProjectList/createProjectDirecive.js","ProjectList/deleteProjectDirective.js","ProjectList/editProjectDirective.js","ProjectList/projectListCtrl.js","AppCtrl/appCtrl.js","Services/authService.js","Services/finalTaskListService.js","Services/loadingScreenService.js","Services/loadingTaskService.js","Services/projectService.js","Services/taskService.js","TaskList/createTaskDirective.js","TaskList/openTaskDirective.js","TaskList/taskListCtrl.js","TaskList/taskListDirective.js","User/userProfileCtrl.js","User/userProfileDirective.js","toolBar/searchBar.js","toolBar/toolbarCtrl.js","toolBar/toolsMenu.js"],"names":["app","angular","module","config","$mdThemingProvider","$httpProvider","customPrimary","definePalette","theme","primaryPalette","accentPalette","exports","directive","restrict","templateUrl","scope","controller","$scope","$rootScope","$mdDialog","projectService","authService","loadingScreenService","projects","setProjects","firstTime","status","customFullscreen","newTitle","$on","event","getProjects","title","$parent","untoggle","show","createProject","getCurrentSession","then","result","fetchProject","res","appendProject","setCurrentProject","undefined","$apply","taskIncrement","taskDecrement","editProject","deleteProject","getUserProjects","hide","console","log","forEach","elem","index","arr","id","getCurrentProjectId","task_count","parseInt","project","target","projectListElements","document","getElementsByClassName","element","removeClass","parent","addClass","$broadcast","$timeout","newProjectTitle","currentProject","getCurrentProject","closeRightSidenav","darkenTheScreen","querySelector","myNav","openRightSidenav","navID","$","toggleCreateProject","toggleDeleteProject","toggleEditProject","toggleCreateTask","toggleOpenTask","service","$http","$cookies","session","getSession","Promise","resolve","reject","get","post","response","put","data","checkSession","string","url","method","withCredentials","params","fetchAccount","account","Account","err","util","require","finalTaskList","searchResults","sortByDateAsc","obj1","obj2","date","sortByDateDesc","formatDate","userDate","Date","yr","getFullYear","month","getMonth","day","getDate","newDate","getDayOfWeek","now","moment","myDate","isSame","add","formTaskList","tasks","days","key","length","Object","Task","created_at","push","flag","taskListKey","i","dayOfWeek","format","copy","getFinalTaskList","search","searchText","CustomSearch","searchQuery","regexp","RegExp","isString","filter","bind","splice","postCreateAppendTask","task","unshift","appendTask","appendNewTasks","projectList","Project","headers","project_id","map","object","incrementPagingOffset","paging_offset","addTask","newObj","fetchTasks","paging_size","fetchTask","taskId","task_id","createTask","projectId","description","updateTask","deleteTask","completeTask","transclude","replace","taskService","finalTaskListService","loadingTaskService","$location","newTask","currentTask","setTaskList","currentSession","setTimeout","formListForShow","searchTask","openTask","listLength","j","setAccount","link","attrs","searchButton","searchBar","active","clickPermission","activateDisactivateSearchBar","preventDefault","find","focus","val","on","focusout","showEditProjectDialog","ev","DialogController","body","targetEvent","clickOutsideToClose","fullscreen","text","cancel","answer","confirmDelete","showDeleteProjectDialog","tButton","getElementById","dMenu","toolsButton","dropMenu","attr","children"],"mappings":";;AAAA,IAAIA,MAAMC,QAAQC,MAAR,CAAe,mBAAf,EAAoC,CAAC,YAAD,EAAe,YAAf,EAA6B,WAA7B,CAApC,CAAV;;AAEAF,IAAIG,MAAJ,CAAW,UAAUC,kBAAV,EAA8BC,aAA9B,EAA6C;;AAErD,MAAIC,gBAAgB;AACf,UAAM,SADS;AAEf,WAAO,SAFQ;AAGf,WAAO,SAHQ;AAIf,WAAO,SAJQ;AAKf,WAAO,SALQ;AAMf,WAAO,SANQ;AAOf,WAAO,SAPQ;AAQf,WAAO,SARQ;AASf,WAAO,SATQ;AAUf,WAAO,SAVQ;AAWf,YAAQ,SAXO;AAYf,YAAQ,SAZO;AAaf,YAAQ,SAbO;AAcf,YAAQ;AAdO,GAApB;AAgBCF,qBAAmBG,aAAnB,CAAiC,eAAjC,EAAkDD,aAAlD;;AAEAF,qBAAmBI,KAAnB,CAAyB,SAAzB,EACGC,cADH,CACkB,eADlB,EAEGC,aAFH,CAEiB,KAFjB;AAGF;AACA;AACA;AACA;AACA;AACA;AAEC,CA9BH;;AAgCAR,OAAOS,OAAP,GAAiBX,GAAjB;;;AClCA;;;;;;AAEA,eAAIY,SAAJ,CAAc,eAAd,EAA+B,YAAY;AACvC,SAAO;AACLC,cAAU,IADL;AAELC,iBAAa,qDAFR;AAGLC,WAAO,EAHF;AAMLC,gBAAY,oBAAUC,MAAV,EAAkB,CAE7B;AARI,GAAP;AAUD,CAXH;;;ACFA;;;;;;AAEA,eAAIL,SAAJ,CAAc,eAAd,EAA+B,YAAY;AACvC,SAAO;AACLC,cAAU,IADL;AAELC,iBAAa,qDAFR;AAGLC,WAAO,EAHF;AAMLC,gBAAY,oBAAUC,MAAV,EAAkB,CAE7B;AARI,GAAP;AAUD,CAXH;;;ACFA;;;;;;AAEA,eAAIL,SAAJ,CAAc,aAAd,EAA6B,YAAY;AACrC,SAAO;AACLC,cAAU,IADL;AAELC,iBAAa,mDAFR;AAGLC,WAAO,EAHF;AAMLC,gBAAY,oBAAUC,MAAV,EAAkB,CAE7B;AARI,GAAP;AAUD,CAXH;;;ACFA;;;;;;AAEA;AACA,eAAID,UAAJ,CAAe,iBAAf,EAAkC,UAASC,MAAT,EAAiBC,UAAjB,EAA6BC,SAA7B,EAAwCC,cAAxC,EAAwDC,WAAxD,EAAqEC,oBAArE,EAA2F;AAC3H;AACA;AACDL,SAAOM,QAAP,GAAkB;AACfA,cAAU,EADK;AAEfC,iBAAa,qBAAUD,QAAV,EAAoB;AAC/B,WAAKA,QAAL,GAAgBA,QAAhB;AACD;AAJc,GAAlB;AAMCN,SAAOQ,SAAP,GAAmB,IAAnB;AACAR,SAAOS,MAAP,GAAgB,IAAhB;AACAT,SAAOU,gBAAP,GAA0B,KAA1B;AACAV,SAAOW,QAAP,GAAkB,EAAlB;;AAEAX,SAAOY,GAAP,CAAW,aAAX,EAA0B,UAAUC,KAAV,EAAiB;AACzCC;AACD,GAFD;;AAIAd,SAAOY,GAAP,CAAW,eAAX,EAA4B,UAAUC,KAAV,EAAiBE,KAAjB,EAAwB;AAChDf,WAAOgB,OAAP,CAAeC,QAAf;AACAZ,yBAAqBa,IAArB;AACAf,mBAAegB,aAAf,CAA6Bf,YAAYgB,iBAAZ,EAA7B,EAA8DL,KAA9D,EACCM,IADD,CACM,UAASC,MAAT,EAAgB;AACpBnB,qBAAeoB,YAAf,CAA4BnB,YAAYgB,iBAAZ,EAA5B,EAA6DE,MAA7D,EAAqED,IAArE,CAA0E,UAASG,GAAT,EAAa;AACrFrB,uBAAesB,aAAf,CAA6BD,GAA7B;AACAxB,eAAO0B,iBAAP,CAAyBC,SAAzB,EAAoCH,GAApC;AACAxB,eAAO4B,MAAP;AACD,OAJD;AAMD,KARD;AASH,GAZD;;AAcA5B,SAAOY,GAAP,CAAW,eAAX,EAA4B,UAAUC,KAAV,EAAiB;AAC3Cb,WAAO6B,aAAP;AACD,GAFD;;AAIA7B,SAAOY,GAAP,CAAW,eAAX,EAA4B,UAAUC,KAAV,EAAiB;AAC3Cb,WAAO8B,aAAP;AACD,GAFD;;AAIC9B,SAAOY,GAAP,CAAW,aAAX,EAA0B,UAAUC,KAAV,EAAiBF,QAAjB,EAA2B;AACpDX,WAAOgB,OAAP,CAAeC,QAAf;AACAZ,yBAAqBa,IAArB;AACAf,mBAAe4B,WAAf,CAA2B3B,YAAYgB,iBAAZ,EAA3B,EAA4DT,QAA5D,EACCU,IADD,CACM,UAAUC,MAAV,EAAkB;AACtBR;AACD,KAHD;AAIA,GAPD;;AASAd,SAAOY,GAAP,CAAW,eAAX,EAA4B,UAAUC,KAAV,EAAiB;AAC5Cb,WAAOgB,OAAP,CAAeC,QAAf;AACAZ,yBAAqBa,IAArB;AACAf,mBAAe6B,aAAf,CAA6B5B,YAAYgB,iBAAZ,EAA7B,EACCC,IADD,CACM,UAAUC,MAAV,EAAkB;AACtBR;AAED,KAJD;AAKA,GARD;;AAUD,WAASA,WAAT,GAAuB;;AAErBX,mBAAe8B,eAAf,CAA+B7B,YAAYgB,iBAAZ,EAA/B,EACCC,IADD,CACM,UAASC,MAAT,EAAgB;;AAEpB,UAAIhB,WAAWH,eAAeW,WAAf,EAAf;;AAEAd,aAAO4B,MAAP,CAAc,YAAY;;AAE1B5B,eAAOM,QAAP,CAAgBC,WAAhB,CAA4BD,QAA5B;AACAD,6BAAqB6B,IAArB;AACA,YAAGlC,OAAOQ,SAAV,EACA;AACER,iBAAOQ,SAAP,GAAmB,KAAnB;AACAR,iBAAO0B,iBAAP,CAAyBC,SAAzB,EAAoC3B,OAAOM,QAAP,CAAgBA,QAAhB,CAAyB,CAAzB,CAApC;AACD;AACF,OATC;AAUA6B,cAAQC,GAAR,CAAY,cAAZ,EAA2BpC,OAAOM,QAAP,CAAgBA,QAA3C;AACD,KAhBD;AAkBD;;AAEDN,SAAO6B,aAAP,GAAuB,YAAY;AACjC7B,WAAOM,QAAP,CAAgBA,QAAhB,CAAyB+B,OAAzB,CAAiC,UAASC,IAAT,EAAeC,KAAf,EAAsBC,GAAtB,EAA0B;AACzD,UAAGF,KAAKG,EAAL,KAAYtC,eAAeuC,mBAAf,EAAf,EACE;AACEJ,aAAKK,UAAL,GAAgBC,SAASN,KAAKK,UAAd,EAAyB,EAAzB,IAA+B,CAA/C;AACD;AACJ,KALD;AAMD,GAPD;;AASA3C,SAAO8B,aAAP,GAAuB,YAAY;AACjC9B,WAAOM,QAAP,CAAgBA,QAAhB,CAAyB+B,OAAzB,CAAiC,UAASC,IAAT,EAAeC,KAAf,EAAsBC,GAAtB,EAA0B;AACzD,UAAGF,KAAKG,EAAL,KAAYtC,eAAeuC,mBAAf,EAAf,EACE;AACEJ,aAAKK,UAAL,GAAgBC,SAASN,KAAKK,UAAd,EAAyB,EAAzB,IAA+B,CAA/C;AACD;AACJ,KALD;AAMD,GAPD;;AASA;AACA3C,SAAO0B,iBAAP,GAA2B,UAAUb,KAAV,EAAiBgC,OAAjB,EAA0B;AACnDV,YAAQC,GAAR,CAAY,mBAAZ,EAAiCS,OAAjC;AACA,QAAGhC,KAAH,EACD;AACI,UAAGA,MAAMiC,MAAT,EACA;AACE,YAAIC,sBAAsBC,SAASC,sBAAT,CAAgC,iBAAhC,CAA1B;AACAjE,gBAAQkE,OAAR,CAAgBH,mBAAhB,EAAqCI,WAArC,CAAiD,iBAAjD;AACAnE,gBAAQkE,OAAR,CAAgBrC,MAAMiC,MAAtB,EAA8BM,MAA9B,GAAuCC,QAAvC,CAAgD,iBAAhD;AACD;AACH;AACDlD,mBAAeuB,iBAAf,CAAiCmB,OAAjC;AACA5C,eAAWqD,UAAX,CAAsB,mBAAtB;AACArD,eAAWqD,UAAX,CAAsB,aAAtB,EAAqCT,OAArC;AACA;AACD,GAfD;AAmBD,CAvHD;;;ACHA;;;;;;AAEA,eAAI9C,UAAJ,CAAe,SAAf,EAA0B,UAASC,MAAT,EAAiBC,UAAjB,EAA6BsD,QAA7B,EAAuCpD,cAAvC,EAAuD;;AAE/EH,SAAOwD,eAAP,GAAyB,EAAzB;AACAxD,SAAOyD,cAAP,GAAwB,EAAxB;;AAEAzD,SAAOY,GAAP,CAAW,mBAAX,EAAgC,UAAUC,KAAV,EAAiB;AAC/Cb,WAAOyD,cAAP,GAAsBtD,eAAeuD,iBAAf,EAAtB;AACD,GAFD;;AAIA1D,SAAO2D,iBAAP,GAA2B,YAAY;AACrC,WAAO,YAAY;AACjBxB,cAAQC,GAAR,CAAY,mBAAZ;AACA,UAAIwB,kBAAkB5E,QAAQkE,OAAR,CAAiBF,SAASa,aAAT,CAAwB,oBAAxB,CAAjB,CAAtB;AACA,UAAIC,QAAQ9E,QAAQkE,OAAR,CAAiBF,SAASa,aAAT,CAAwB,eAAxB,CAAjB,CAAZ;AACAC,YAAMX,WAAN,CAAkB,cAAlB;AACAS,sBAAgBP,QAAhB,CAAyB,UAAzB;AACAE,eAAS,YAAU;AACjBK,wBAAgBT,WAAhB,CAA4B,UAA5B;AACAS,wBAAgBP,QAAhB,CAAyB,QAAzB;AACD,OAHD,EAGE,GAHF;AAKD,KAXD;AAYD,GAbD;;AAeArD,SAAO+D,gBAAP,GAA0B,UAAUC,KAAV,EAAiB;AACzC,WAAO,YAAY;AACjB,UAAIJ,kBAAkBK,EAAE,oBAAF,CAAtB;AACA,UAAIH,QAAQG,EAAE,MAAMD,KAAR,CAAZ;AACAJ,sBAAgBT,WAAhB,CAA4B,QAA5B;AACAW,YAAMT,QAAN,CAAe,cAAf;AACC,KALH;AAMC,GAPH;;AASErD,SAAOmB,aAAP,GAAuB,UAASJ,KAAT,EAAgB;AACrCd,eAAWqD,UAAX,CAAsB,eAAtB,EAAuCvC,KAAvC;AACD,GAFD;;AAIAf,SAAOgC,aAAP,GAAuB,UAASjB,KAAT,EAAgB;AACrCd,eAAWqD,UAAX,CAAsB,eAAtB;AACD,GAFD;;AAIAtD,SAAO+B,WAAP,GAAqB,UAASpB,QAAT,EAAmB;AACtCV,eAAWqD,UAAX,CAAsB,aAAtB,EAAqC3C,QAArC;AACD,GAFD;;AAIFX,SAAOkE,mBAAP,GAA6BlE,OAAO+D,gBAAP,CAAwB,gBAAxB,CAA7B;AACA/D,SAAOmE,mBAAP,GAA6BnE,OAAO+D,gBAAP,CAAwB,gBAAxB,CAA7B;AACA/D,SAAOoE,iBAAP,GAA2BpE,OAAO+D,gBAAP,CAAwB,cAAxB,CAA3B;AACA/D,SAAOqE,gBAAP,GAA0BrE,OAAO+D,gBAAP,CAAwB,aAAxB,CAA1B;AACA/D,SAAOsE,cAAP,GAAwBtE,OAAO+D,gBAAP,CAAwB,WAAxB,CAAxB;AACD/D,SAAOiB,QAAP,GAAkBjB,OAAO2D,iBAAP,EAAlB;AAIA,CAtDD;;;ACFA;;;;;;AAEA,eAAIY,OAAJ,CAAY,aAAZ,EAA2B,UAASC,KAAT,EAAgBC,QAAhB,EAA0B;;AAEpD,KAAIC,UAAU,EAAd;;AAEA,KAAItD,oBAAoB,SAApBA,iBAAoB,GAAY;AACnC,SAAOsD,OAAP;AACA,EAFD;;AAKA,KAAIC,aAAa,SAAbA,UAAa,GAAY;AAC5B,SAAO,IAAIC,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAA0B;AAC5CJ,aAAUD,SAASM,GAAT,CAAa,SAAb,CAAV;AACA,OAAGL,OAAH,EACA;AACCvC,YAAQC,GAAR,CAAY,eAAZ;AACAD,YAAQC,GAAR,CAAYsC,OAAZ;AACAG,YAAQH,OAAR;AACA,IALD,MAOA;AACCF,UAAMQ,IAAN,CAAW,uEAAX,EACE3D,IADF,CACO,UAAS4D,QAAT,EAAmB;AACnBR,cAASS,GAAT,CAAa,SAAb,EAAwBD,SAASE,IAAT,CAAcT,OAAtC;AACAA,eAAUO,SAASE,IAAT,CAAcT,OAAxB;AACAG,aAAQH,OAAR;AACF,KALL,EAMKrD,IANL,CAMU,YAAU;AACfc,aAAQC,GAAR,CAAY,uBAAZ;AACA0C,YAAO,uBAAP;AACA,KATL;AAUA;AAED,GAtBM,CAAP;AAwBA,EAzBD;;AA2BA,KAAIM,eAAe,SAAfA,YAAe,CAAUV,OAAV,EAAmB;;AAErC,SAAO,IAAIE,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC3C,OAAIO,SAAS,wEAAb;AACAb,SAAM;AACLc,SAAKD,MADA;AAELE,YAAQ,KAFH;AAGLC,qBAAiB,KAHZ;AAILC,YAAQ,EAACf,SAASA,OAAV;AAJH,IAAN,EAMCrD,IAND,CAMM,UAAS4D,QAAT,EAAkB;AACvB9C,YAAQC,GAAR,CAAY,cAAZ,EAA4B6C,QAA5B;AACA,QAAIA,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACC0B,aAAQC,GAAR,CAAY,yBAAZ;AACAyC,aAAQH,OAAR;AACA,KAJD,MAMA;AACCvC,aAAQC,GAAR,CAAY,sBAAZ;AACA0C,YAAO,sBAAP;AACA;AACD,IAlBD;AAmBA,GArBM,CAAP;AAsBA,EAxBD;;AA0BA,KAAIY,eAAe,SAAfA,YAAe,CAAShB,OAAT,EAAkB;AACpC,SAAO,IAAIE,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC3C3C,WAAQC,GAAR,CAAY,SAAZ,EAAuBsC,OAAvB;AACA,OAAIiB,UAAU,EAAd;AACA,OAAIN,SAAS,wEAAb;AACAb,SAAM;AACLc,SAAKD,MADA;AAELE,YAAQ,KAFH;AAGLE,YAAQ,EAACf,SAASA,OAAV;AAHH,IAAN,EAIGrD,IAJH,CAIQ,UAAS4D,QAAT,EAAkB;AACzBU,cAAUV,SAASE,IAAT,CAAcS,OAAxB;AACAf,YAAQc,OAAR;AACA,IAPD,EAOE,UAASE,GAAT,EAAa;AACd1D,YAAQC,GAAR,CAAY,4BAAZ;AACA0C,WAAOe,GAAP;AACA,IAVD;AAWA,GAfM,CAAP;AAiBA,EAlBD;;AAqBA,QAAO;AACNlB,cAAYA,UADN;AAENvD,qBAAmBA,iBAFb;AAGNgE,gBAAcA,YAHR;AAINM,gBAAcA;;AAJR,EAAP;AAOA,CA1FD;;;ACFA;;;;;;AACA,IAAMI,OAAOC,QAAQ,MAAR,CAAb;;AAEA,eAAIxB,OAAJ,CAAY,sBAAZ,EAAoC,YAAW;;AAE7C,MAAIyB,gBAAgB,EAApB;AACA,MAAIC,gBAAgB,EAApB;;AAEA,MAAIC,gBAAgB,SAAhBA,aAAgB,CAAUC,IAAV,EAAgBC,IAAhB,EAAsB;;AAExC,QAAID,KAAKE,IAAL,GAAYD,KAAKC,IAArB,EAA2B,OAAO,CAAP;AAC3B,QAAIF,KAAKE,IAAL,GAAYD,KAAKC,IAArB,EAA2B,OAAO,CAAC,CAAR;AAC3B,WAAO,CAAP;AAED,GAND;;AAQA,MAAIC,iBAAiB,SAAjBA,cAAiB,CAAUH,IAAV,EAAgBC,IAAhB,EAAsB;;AAEzC,QAAID,KAAKE,IAAL,GAAYD,KAAKC,IAArB,EAA2B,OAAO,CAAC,CAAR;AAC3B,QAAIF,KAAKE,IAAL,GAAYD,KAAKC,IAArB,EAA2B,OAAO,CAAP;AAC3B,WAAO,CAAP;AAED,GAND;AAOA,MAAIE,aAAa,SAAbA,UAAa,CAAUC,QAAV,EAAoB;AACnC,QAAIH,OAAU,IAAII,IAAJ,CAASD,QAAT,CAAd;AAAA,QACAE,KAAUL,KAAKM,WAAL,EADV;AAAA,QAEAC,QAAUP,KAAKQ,QAAL,KAAkB,EAAlB,GAAuB,MAAMR,KAAKQ,QAAL,EAA7B,GAA+CR,KAAKQ,QAAL,EAFzD;AAAA,QAGAC,MAAUT,KAAKU,OAAL,KAAkB,EAAlB,GAAuB,MAAMV,KAAKU,OAAL,EAA7B,GAA+CV,KAAKU,OAAL,EAHzD;AAAA,QAIAC,UAAUF,MAAM,GAAN,GAAYF,KAAZ,GAAoB,GAApB,GAA0BF,EAJpC;AAKA,WAAOM,OAAP;AACD,GAPD;;AASA,MAAIC,eAAe,SAAfA,YAAe,CAAUZ,IAAV,EAAgB;AACjC,QAAIhB,SAAS,EAAb;AACA,QAAI6B,MAAMC,QAAV;AACA,QAAIC,SAASD,OAAOd,IAAP,EAAY,uBAAZ,CAAb;;AAEA,QAAIe,OAAOC,MAAP,CAAcH,GAAd,EAAkB,KAAlB,CAAJ,EACA;AACE7B,eAAS,OAAT;AACA,aAAOA,MAAP;AACD;AACD,QAAI+B,OAAOC,MAAP,CAAcH,IAAII,GAAJ,CAAQ,CAAR,EAAW,MAAX,CAAd,EAAiC,KAAjC,CAAJ,EACA;AACEjC,eAAS,UAAT;AACA,aAAOA,MAAP;AACD;;AAED,QAAIyB,MAAMM,OAAON,GAAP,EAAV;;AAGA,YAAQA,GAAR;AACE,WAAK,CAAL;AACAzB,iBAAS,QAAT;AACA;AACA,WAAK,CAAL;AACAA,iBAAS,QAAT;AACA;AACA,WAAK,CAAL;AACAA,iBAAS,SAAT;AACA;AACA,WAAK,CAAL;AACAA,iBAAS,WAAT;AACA;AACA,WAAK,CAAL;AACAA,iBAAS,UAAT;AACA;AACA,WAAK,CAAL;AACAA,iBAAS,QAAT;AACA;AACA,WAAK,CAAL;AACAA,iBAAS,UAAT;AACA;AACA;AACAA,iBAAS,OAAT;AAvBF;AAyBA,WAAOA,MAAP;AAED,GA9CD;;AAgDA,MAAIkC,eAAe,SAAfA,YAAe,CAAUC,KAAV,EAAiB;AAAE;;AAEpC,QAAIC,OAAO,EAAX;AACAtF,YAAQC,GAAR,CAAY,cAAZ;;AAEA,SAAK,IAAIsF,MAAM,CAAf,EAAkBA,MAAIF,MAAMG,MAA5B,EAAoCD,KAApC,EACA;;AAEE,UAAID,KAAKE,MAAL,GAAY,CAAhB,EACA;AACE,YAAIb,MAAM,IAAIc,MAAJ,EAAV;AACAd,YAAIT,IAAJ,GAAWmB,MAAME,GAAN,EAAWG,IAAX,CAAgBC,UAA3B;AACA3F,gBAAQC,GAAR,CAAY,MAAZ,EAAmB0E,IAAIT,IAAvB;AACAS,YAAIU,KAAJ,GAAY,CAACA,MAAME,GAAN,EAAWG,IAAZ,CAAZ;AACAJ,aAAKM,IAAL,CAAUjB,GAAV;AACD,OAPD,MASA;AACE,YAAIkB,OAAO,KAAX;AACA,aAAK,IAAIC,cAAc,CAAvB,EAA0BA,cAAYR,KAAKE,MAA3C,EAAmDM,aAAnD,EACA;AACE,cAAGd,OAAOM,KAAKQ,WAAL,EAAkB5B,IAAzB,EAA+BgB,MAA/B,CAAsCF,OAAOK,MAAME,GAAN,EAAWG,IAAX,CAAgBC,UAAvB,CAAtC,EAAyE,KAAzE,CAAH,EACA;AACEL,iBAAKQ,WAAL,EAAkBT,KAAlB,CAAwBO,IAAxB,CAA6BP,MAAME,GAAN,EAAWG,IAAxC;AACAG,mBAAO,IAAP;AACD;AACF;AACD,YAAGA,IAAH,EACA;AACE;AACD;AACD,YAAIlB,MAAM,IAAIc,MAAJ,EAAV;AACAd,YAAIT,IAAJ,GAAWmB,MAAME,GAAN,EAAWG,IAAX,CAAgBC,UAA3B;AACAhB,YAAIU,KAAJ,GAAY,CAACA,MAAME,GAAN,EAAWG,IAAZ,CAAZ;;AAEAJ,aAAKM,IAAL,CAAUjB,GAAV;AAED;AACF;AACD;AACA,SAAK,IAAIoB,IAAI,CAAb,EAAgBA,IAAIT,KAAKE,MAAzB,EAAiCO,GAAjC,EACA;AACET,WAAKS,CAAL,EAAQC,SAAR,GAAoBlB,aAAaQ,KAAKS,CAAL,EAAQ7B,IAArB,CAApB;AACAoB,WAAKS,CAAL,EAAQ7B,IAAR,GAAec,OAAOM,KAAKS,CAAL,EAAQ7B,IAAf,EAAoB,uBAApB,EAA6C+B,MAA7C,CAAoD,YAApD,CAAf;AACA;AACD;;AAECnC,oBAAgBjH,QAAQqJ,IAAR,CAAaZ,IAAb,CAAhB;;AAEAtF,YAAQC,GAAR,CAAY,eAAZ,EAA6B6D,aAA7B;AACAD,oBAAgByB,IAAhB;;AAEA,WAAO,IAAP;AAED,GAtDH;;AAwDE,MAAIa,mBAAmB,SAAnBA,gBAAmB,GAAY;AACjC,WAAOtC,aAAP;AACD,GAFD;;AAIA,MAAIuC,SAAS,SAATA,MAAS,CAAUC,UAAV,EAAsB;AACjCvC,oBAAgBjH,QAAQqJ,IAAR,CAAarC,aAAb,CAAhB;AACA,QAAGwC,cAAY,EAAf,EACA;AACC,aAAOvC,aAAP;AACA;AACA,aAASwC,YAAT,CAAsBC,WAAtB,EAAmCxF,OAAnC,EACA;AACI;AACA,UAAIyF,SAAS,IAAIC,MAAJ,CAAWJ,UAAX,EAAuB,GAAvB,CAAb;AACA,UAAIhH,MAAM,CAAC,CAAX;AACA,WAAI,IAAIkG,GAAR,IAAexE,OAAf,EACA;AACC,YAAGwE,OAAK,OAAR,EACE;AACE;AACA,cAAG5B,KAAK+C,QAAL,CAAc3F,QAAQwE,GAAR,CAAd,CAAH,EACD;AACClG,kBAAM0B,QAAQwE,GAAR,EAAaa,MAAb,CAAoBI,MAApB,CAAN;AACA,gBAAGnH,MAAI,CAAC,CAAR,EACA;AACE,qBAAO,IAAP;AACD;AACF;AACA;AACH;;AAED,aAAO,KAAP;AACD;;AAEJ,SAAI,IAAI0G,IAAI,CAAZ,EAAeA,IAAIjC,cAAc0B,MAAjC,EAAyCO,GAAzC,EACA;AACE/F,cAAQC,GAAR,CAAY,kBAAkB8F,CAA9B,EAAiCjC,cAAciC,CAAd,CAAjC;AACAjC,oBAAciC,CAAd,EAAiBV,KAAjB,GAAyBvB,cAAciC,CAAd,EAAiBV,KAAjB,CAAuBsB,MAAvB,CAA8BL,aAAaM,IAAb,CAAkB,IAAlB,EAAuBP,UAAvB,CAA9B,CAAzB;AACA,UAAG,CAACvC,cAAciC,CAAd,EAAiBV,KAAjB,CAAuB,CAAvB,CAAJ,EACA;AACEvB,sBAAc+C,MAAd,CAAqBd,CAArB,EAAwB,CAAxB;AACAA;AACD;AACF;AACD,WAAOjC,aAAP;AACD,GAzCD;;AA2CA,MAAIgD,uBAAuB,SAAvBA,oBAAuB,CAAUC,IAAV,EAAgB;AACzC,QAAIhC,MAAM,IAAIT,IAAJ,EAAV;AACA,QAAI0B,YAAYlB,aAAaC,GAAb,CAAhB;AACA,QAAIb,OAAOc,OAAOD,GAAP,EAAY,uBAAZ,EAAqCkB,MAArC,CAA4C,YAA5C,CAAX;AACA,SAAK,IAAIF,IAAI,CAAb,EAAgBA,IAAGlC,cAAc2B,MAAjC,EAAyCO,GAAzC,EACA;AACE,UAAGlC,cAAckC,CAAd,EAAiB7B,IAAjB,KAAwBA,IAA3B,EACE;AACEL,sBAAckC,CAAd,EAAiBV,KAAjB,CAAuB2B,OAAvB,CAA+BD,IAA/B;AACA,eAAO,IAAP;AACD;AACJ;AACD,QAAIpC,MAAM,IAAIc,MAAJ,EAAV;AACAd,QAAIT,IAAJ,GAAWA,IAAX;AACAS,QAAIU,KAAJ,GAAY,CAAC0B,IAAD,CAAZ;AACApC,QAAIqB,SAAJ,GAAgBA,SAAhB;AACAnC,kBAAcmD,OAAd,CAAsBrC,GAAtB;AACD,GAjBD;;AAoBA,MAAIsC,aAAa,SAAbA,UAAa,CAAUF,IAAV,EAAgB;;AAE7B,QAAIlB,OAAO,IAAX;AACA,QAAI3B,OAAOc,OAAO+B,KAAKpB,UAAZ,EAAwB,uBAAxB,EAAiDM,MAAjD,CAAwD,YAAxD,CAAX;;AAEA,SAAK,IAAIF,IAAI,CAAb,EAAgBA,IAAGlC,cAAc2B,MAAjC,EAAyCO,GAAzC,EACA;AACE,UAAGlC,cAAckC,CAAd,EAAiB7B,IAAjB,KAAwBA,IAA3B,EACE;AACEL,sBAAckC,CAAd,EAAiBV,KAAjB,CAAuBO,IAAvB,CAA4BmB,IAA5B;AACAlB,eAAO,KAAP;AACA;AACD;AACJ;AACD,QAAIA,IAAJ,EACA;AACE,UAAIlB,MAAM,IAAIc,MAAJ,EAAV;AACAd,UAAIT,IAAJ,GAAWA,IAAX;AACAS,UAAIU,KAAJ,GAAY,CAAC0B,IAAD,CAAZ;AACApC,UAAIqB,SAAJ,GAAgBlB,aAAaiC,KAAKpB,UAAlB,CAAhB;AACA9B,oBAAc+B,IAAd,CAAmBjB,GAAnB;AACD;AACF,GAtBH;;AAwBA,MAAIuC,iBAAiB,SAAjBA,cAAiB,CAAU7B,KAAV,EACrB;;AAEE,SAAK,IAAIU,IAAI,CAAb,EAAgBA,IAAIV,MAAMG,MAA1B,EAAkCO,GAAlC,EACA;AACEkB,iBAAW5B,MAAMU,CAAN,EAASL,IAApB;AACD;AAEF,GARD;;AAWA,SAAO;AACLN,kBAAcA,YADT;AAELe,sBAAkBA,gBAFb;AAGLC,YAAQA,MAHH;AAILU,0BAAsBA,oBAJjB;AAKLI,oBAAgBA,cALX;AAMLpC,kBAAcA,YANT;AAOLV,gBAAYA;;AAPP,GAAP;AAUD,CArPH;;;ACHA;;;;;;AAEA,eAAIhC,OAAJ,CAAY,sBAAZ,EAAoC,YAAW;AAC7C,KAAIrD,OAAO,SAAPA,IAAO,GAAY;AACtB+C,IAAE,MAAF,EAAUZ,QAAV,CAAmB,cAAnB;AACAY,IAAE,iBAAF,EAAqBd,WAArB,CAAiC,QAAjC;AACA,EAHD;;AAKA,KAAIjB,OAAO,SAAPA,IAAO,GAAY;AACtB+B,IAAE,MAAF,EAAUd,WAAV,CAAsB,cAAtB;AACAc,IAAE,iBAAF,EAAqBZ,QAArB,CAA8B,QAA9B;AACA,EAHD;;AAKA,QAAO;AACNnC,QAAMA,IADA;AAENgB,QAAMA;AAFA,EAAP;AAIA,CAfF;;;ACFA;;;;;;AAEA,eAAIqC,OAAJ,CAAY,oBAAZ,EAAkC,YAAW;AAC3C,KAAIrD,OAAO,SAAPA,IAAO,GAAY;AACtB+C,IAAE,iBAAF,EAAqBd,WAArB,CAAiC,QAAjC;AACA,EAFD;;AAIA,KAAIjB,OAAO,SAAPA,IAAO,GAAY;AACtB+B,IAAE,iBAAF,EAAqBZ,QAArB,CAA8B,QAA9B;AACA,EAFD;;AAIA,QAAO;AACNnC,QAAMA,IADA;AAENgB,QAAMA;AAFA,EAAP;AAIA,CAbF;;;ACFA;;;;;;AAEA,eAAIqC,OAAJ,CAAY,gBAAZ,EAA8B,UAASC,KAAT,EAAgB;;AAE5C,MAAI8E,cAAc,EAAlB;;AAEA,MAAInI,gBAAgB,SAAhBA,aAAgB,CAAUuD,OAAV,EAAmB3D,KAAnB,EACpB;AACEoB,YAAQC,GAAR,CAAY,UAAZ,EAAwBsC,OAAxB,EAAiC,QAAjC,EAA2C3D,KAA3C;AACA,WAAO,IAAI6D,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1C,UAAIO,SAAS,iFAAb;AACAb,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,MAFJ;AAGJJ,cAAM,EAACT,SAASA,OAAV,EAAmB6E,SAAS,EAACxI,OAAOA,KAAR,EAA5B,EAHF;AAIJyI,iBAAS,EAAC,gBAAgB,kBAAjB;AAJL,OAAN,EAMCnI,IAND,CAMM,UAAS4D,QAAT,EAAkB;AACtB9C,gBAAQC,GAAR,CAAY,cAAZ,EAA4B6C,QAA5B;AACA,YAAIA,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,iBAAZ;AACAyC,kBAAQI,SAASE,IAAT,CAAcoE,OAAd,CAAsB9G,EAA9B;AACD,SAJD,MAMA;AACEN,kBAAQC,GAAR,CAAY,yBAAZ,EAAuC6C,SAASxE,MAAhD;AACAqE,iBAAO,yBAAP;AACD;AACF,OAlBD;AAmBD,KArBM,CAAP;AAsBD,GAzBD;;AA2BA,MAAIvD,eAAe,SAAfA,YAAe,CAAUmD,OAAV,EAAmBjC,EAAnB,EACnB;AACEN,YAAQC,GAAR,CAAY,WAAZ,EAAyBsC,OAAzB,EAAkC,MAAlC,EAA0CjC,EAA1C;AACA,WAAO,IAAImC,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1C,UAAIO,SAAS,iFAAb;AACAb,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,KAFJ;AAGJE,gBAAQ,EAACf,SAASA,OAAV,EAAmB+E,YAAYhH,EAA/B,EAHJ;AAIJ+G,iBAAS,EAAC,gBAAgB,kBAAjB;AAJL,OAAN,EAMCnI,IAND,CAMM,UAAS4D,QAAT,EAAkB;AACtB9C,gBAAQC,GAAR,CAAY,cAAZ,EAA4B6C,QAA5B;AACA,YAAIA,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,iBAAZ;AACAyC,kBAAQI,SAASE,IAAT,CAAcoE,OAAtB;AACD,SAJD,MAMA;AACEpH,kBAAQC,GAAR,CAAY,yBAAZ,EAAuC6C,SAASxE,MAAhD;AACAqE,iBAAO,yBAAP;AACD;AACF,OAlBD;AAmBD,KArBM,CAAP;AAsBD,GAzBD;;AA4BA,MAAI/C,cAAc,SAAdA,WAAc,CAAU2C,OAAV,EAAmB3D,KAAnB,EAClB;AACEoB,YAAQC,GAAR,CAAY,UAAZ,EAAwBsC,OAAxB,EAAiC,QAAjC,EAA2C3D,KAA3C;AACA,WAAO,IAAI6D,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1C,UAAIO,SAAS,iFAAb;AACAb,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,MAFJ;AAGJJ,cAAM,EAACT,SAASA,OAAV,EAAmB6E,SAAS,EAAC9G,IAAIgB,eAAehB,EAApB,EAAwB1B,OAAOA,KAA/B,EAA5B,EAHF;AAIJyI,iBAAS,EAAC,gBAAgB,kBAAjB;AAJL,OAAN,EAMCnI,IAND,CAMM,UAAS4D,QAAT,EAAkB;AACtB9C,gBAAQC,GAAR,CAAY,cAAZ,EAA4B6C,QAA5B;AACA,YAAIA,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,0BAAZ;AACAyC,kBAAQ,SAAR;AACD,SAJD,MAMA;AACE1C,kBAAQC,GAAR,CAAY,uBAAZ,EAAqC6C,SAASxE,MAA9C;AACAqE,iBAAO,uBAAP;AACD;AACF,OAlBD;AAmBD,KArBM,CAAP;AAsBD,GAzBD;;AA2BC,MAAI9C,gBAAgB,SAAhBA,aAAgB,CAAU0C,OAAV,EACrB;AACEvC,YAAQC,GAAR,CAAY,iBAAZ,EAA+BqB,eAAehB,EAA9C;AACA,WAAO,IAAImC,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1C,UAAIO,SAAS,iFAAb;AACAb,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,QAFJ;AAGJE,gBAAQ,EAACf,SAASA,OAAV,EAAmB+E,YAAYhG,eAAehB,EAA9C;AAHJ,OAAN,EAKCpB,IALD,CAKM,UAAS4D,QAAT,EAAkB;AACtB9C,gBAAQC,GAAR,CAAY,cAAZ,EAA4B6C,QAA5B;AACA,YAAIA,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,0BAAZ;AACAyC,kBAAQ,SAAR;AACD,SAJD,MAMA;AACE1C,kBAAQC,GAAR,CAAY,wBAAZ,EAAsC6C,SAASxE,MAA/C;AACAqE,iBAAO,wBAAP;AACD;AACF,OAjBD;AAkBD,KApBM,CAAP;AAqBD,GAxBA;;AA0BD,MAAIrB,iBAAiB,EAArB;;AAGA,MAAI/B,oBAAoB,SAApBA,iBAAoB,CAAUmB,OAAV,EACxB;AACEY,qBAAiBZ,OAAjB;AACAV,YAAQC,GAAR,CAAY,oBAAZ,EAAkCqB,cAAlC;AACD,GAJD;;AAMA,MAAIf,sBAAsB,SAAtBA,mBAAsB,GAC1B;AACE,WAAOe,eAAehB,EAAtB;AACD,GAHD;;AAKA,MAAIiB,oBAAoB,SAApBA,iBAAoB,GACxB;AACE,WAAOD,cAAP;AACD,GAHD;;AAKA,MAAIhC,gBAAgB,SAAhBA,aAAgB,CAASoB,OAAT,EAAkB;AACpCyG,gBAAYH,OAAZ,CAAoBtG,OAApB;AACD,GAFD;;AAIA,MAAI/B,cAAc,SAAdA,WAAc,GAAU;AACxB,WAAOwI,WAAP;AACH,GAFD;;AAIA,MAAIrH,kBAAkB,SAAlBA,eAAkB,CAAUyC,OAAV,EAAmB;AACvC,WAAO,IAAIE,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1C,UAAIO,SAAS,yEAAb;AACAb,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,KAFJ;AAGJE,gBAAQ,EAACf,SAASA,OAAV;AAHJ,OAAN,EAKCrD,IALD,CAKM,UAAS4D,QAAT,EAAkB;AACtB9C,gBAAQC,GAAR,CAAY,kBAAZ,EAAgC6C,QAAhC;AACA,YAAIA,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,+BAAZ;AACAkH,wBAAcrE,SAASE,IAAT,CAAc7E,QAAd,CAAuBoJ,GAAvB,CAA2B,UAAUC,MAAV,EAAkB;AACzD,mBAAOA,OAAOJ,OAAd;AACD,WAFa,CAAd;AAGA1E,kBAAQ,SAAR;AACD,SAPD,MASA;AACE1C,kBAAQC,GAAR,CAAY,0BAAZ;AACA0C,iBAAO,mBAAP;AACD;AACF,OApBD;AAqBD,KAvBM,CAAP;AAwBD,GAzBD;;AA4BA,SAAO;AACL7C,qBAAiBA,eADZ;AAELd,mBAAeA,aAFV;AAGLI,kBAAcA,YAHT;AAILQ,iBAAaA,WAJR;AAKLC,mBAAeA,aALV;AAMLP,mBAAeA,aANV;AAOLX,iBAAaA,WAPR;AAQLY,uBAAmBA,iBARd;AASLgB,yBAAqBA,mBAThB;AAULgB,uBAAmBA;;AAVd,GAAP;AAeD,CAtLD;;;ACFA;;;;;;AAEA,eAAIa,OAAJ,CAAY,aAAZ,EAA2B,UAASC,KAAT,EAAgB;;AAEzC;AACA;AACA;;AAEA,MAAIoF,wBAAwB,SAAxBA,qBAAwB,GAAY;AACtCC,oBAAcA,gBAAc,CAA5B;AACD,GAFD;;AAIA,MAAIC,UAAU,SAAVA,OAAU,CAASrG,cAAT,EAAyBsG,MAAzB,EAAiC;AAC7CtG,mBAAe+D,KAAf,CAAqBO,IAArB,CAA0BgC,MAA1B;AACD,GAFD;;AAIA,MAAIC,aAAa,SAAbA,UAAa,CAAStF,OAAT,EAAkB7B,OAAlB,EAA0B;;AAEzCV,YAAQC,GAAR,CAAY,gBAAZ;;AAEE,WAAO,IAAIwC,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1C,UAAIO,SAAS,sEAAb;AACAb,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,KAFJ;AAGJE,gBAAQ,EAACf,SAASA,OAAV,EAAmB+E,YAAY5G,QAAQJ,EAAvC,EAA2CwH,aAAapH,QAAQF,UAAhE,EAA4EkH,eAAe,CAA3F;AAHJ,OAAN,EAKCxI,IALD,CAKM,UAAS4D,QAAT,EAAkB;AACtB9C,gBAAQC,GAAR,CAAY,mBAAZ,EAAiC6C,SAASE,IAAT,CAAcqC,KAA/C;AACA,YAAIvC,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,eAAZ,EAA6B6C,SAASE,IAAtC;AACAN,kBAAQI,SAASE,IAAT,CAAcqC,KAAtB;AACD,SAJD,MAMA;AACErF,kBAAQC,GAAR,CAAY,uBAAZ;AACA0C,iBAAO,sBAAP;AACD;AACF,OAjBD;AAkBD,KApBM,CAAP;AAqBH,GAzBD;;AA2BA,MAAIoF,YAAY,SAAZA,SAAY,CAASxF,OAAT,EAAkByF,MAAlB,EAAyB;;AAErC,WAAO,IAAIvF,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1C,UAAIO,SAAS,2EAAb;AACAb,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,KAFJ;AAGJE,gBAAQ,EAACf,SAASA,OAAV,EAAmB0F,SAASD,MAA5B,EAHJ;AAIJX,iBAAS,EAAC,gBAAgB,kBAAjB;AAJL,OAAN,EAMCnI,IAND,CAMM,UAAS4D,QAAT,EAAkB;AACtB9C,gBAAQC,GAAR,CAAY,cAAZ,EAA4B6C,SAASE,IAAT,CAAc0C,IAA1C;AACA,YAAI5C,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,cAAZ;AACAyC,kBAAQI,SAASE,IAAT,CAAc0C,IAAtB;AACD,SAJD,MAMA;AACE1F,kBAAQC,GAAR,CAAY,sBAAZ;AACA0C,iBAAO,sBAAP;AACD;AACF,OAlBD;AAmBD,KArBM,CAAP;AAsBH,GAxBD;;AA0BA,MAAIuF,aAAa,SAAbA,UAAa,CAAS3F,OAAT,EAAkB4F,SAAlB,EAA6BpB,IAA7B,EAAkC;;AAE/C,WAAO,IAAItE,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1C,UAAIO,SAAS,2EAAb;AACAlD,cAAQC,GAAR,CAAYsC,OAAZ;AACFF,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,MAFJ;AAGJJ,cAAM,EAACT,SAASA,OAAV,EAAmB6E,SAAS,EAAC9G,IAAI6H,SAAL,EAA5B,EAA6CzC,MAAM,EAAC9G,OAAOmI,KAAKnI,KAAb,EAAoBwJ,aAAarB,KAAKqB,WAAtC,EAAnD,EAHF;AAIJf,iBAAS,EAAC,gBAAgB,kBAAjB;AAJL,OAAN,EAKGnI,IALH,CAKQ,UAAS4D,QAAT,EAAkB;AACtB9C,gBAAQC,GAAR,CAAY,cAAZ,EAA4B6C,SAASE,IAArC;AACA,YAAIF,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,cAAZ,EAA2B6C,SAASE,IAApC;AACAN,kBAAQI,SAASE,IAAT,CAAc0C,IAAd,CAAmBpF,EAA3B;AACD,SAJD,MAMA;AACEN,kBAAQC,GAAR,CAAY,sBAAZ;AACA0C,iBAAO,sBAAP;AACD;AACF,OAjBH,EAiBI,UAASG,QAAT,EAAkB;AAClB9C,gBAAQC,GAAR,CAAY,IAAZ,EAAiB6C,QAAjB;AACD,OAnBH;AAoBD,KAvBQ,CAAP;AAwBH,GA1BD;;AA4BA,MAAIuF,aAAa,SAAbA,UAAa,CAAS9F,OAAT,EAAkByF,MAAlB,EAA0BpJ,KAA1B,EAAiCwJ,WAAjC,EAA6C;;AAE1D,WAAO,IAAI3F,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1C,UAAIO,SAAS,2EAAb;AACAb,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,MAFJ;AAGJE,gBAAQ,EAACoC,MAAM,EAACpF,IAAI0H,MAAL,EAAapJ,OAAOA,KAApB,EAA2BwJ,aAAaA,WAAxC,EAAP,EAHJ;AAIJf,iBAAS,EAAE,gBAAgB,kBAAlB;AAJL,OAAN,EAMCnI,IAND,CAMM,UAAS4D,QAAT,EAAkB;AACtB9C,gBAAQC,GAAR,CAAY,cAAZ,EAA4B6C,SAASE,IAArC;AACA,YAAIF,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,iBAAZ;AACAyC,kBAAQI,SAASE,IAAT,CAAc0C,IAAtB;AACD,SAJD,MAMA;AACE1F,kBAAQC,GAAR,CAAY,oBAAZ;AACA0C,iBAAO,oBAAP;AACD;AACF,OAlBD;AAmBD,KArBM,CAAP;AAsBH,GAxBD;;AA0BC,MAAI2F,aAAa,SAAbA,UAAa,CAAS/F,OAAT,EAAkByF,MAAlB,EAA0B;;AAExC,WAAO,IAAIvF,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AAC1C,UAAIO,SAAS,2EAAb;AACAb,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,QAFJ;AAGJE,gBAAQ,EAACf,SAASA,OAAV,EAAmB0F,SAASD,MAA5B;AAHJ,OAAN,EAKC9I,IALD,CAKM,UAAS4D,QAAT,EAAkB;AACtB9C,gBAAQC,GAAR,CAAY,cAAZ,EAA4B6C,SAASE,IAArC;AACA,YAAIF,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,iBAAZ;AACAyC,kBAAQI,SAASE,IAAT,CAAc0C,IAAtB;AACD,SAJD,MAMA;AACE1F,kBAAQC,GAAR,CAAY,oBAAZ;AACA0C,iBAAO,oBAAP;AACD;AACF,OAjBD;AAkBD,KApBM,CAAP;AAqBH,GAvBA;;AAyBD,MAAI4F,eAAe,SAAfA,YAAe,CAAUhG,OAAV,EAAmByF,MAAnB,EAA2B;;AAE5C,WAAO,IAAIvF,OAAJ,CAAY,UAASC,OAAT,EAAkBC,MAAlB,EAAyB;AACxC,UAAIO,SAAS,oFAAb;AACAb,YAAM;AACJc,aAAKD,MADD;AAEJE,gBAAQ,MAFJ;AAGJJ,cAAM,EAACT,SAASA,OAAV,EAAmBmD,MAAM,EAACpF,IAAIG,SAASuH,MAAT,CAAL,EAAzB,EAHF;AAIJX,iBAAS,EAAE,gBAAgB,kBAAlB;AAJL,OAAN,EAMCnI,IAND,CAMM,UAAS4D,QAAT,EAAkB;AACtB,YAAIA,SAASxE,MAAT,IAAmB,GAAvB,EACA;AACE0B,kBAAQC,GAAR,CAAY,eAAZ;AACAyC,kBAAQI,QAAR;AACD,SAJD,MAMA;AACE9C,kBAAQC,GAAR,CAAY,iBAAZ;AACA0C,iBAAO,iBAAP;AACD;AACF,OAjBD;AAkBD,KApBI,CAAP;AAsBD,GAxBD;;AA0BA,SAAO;AACLkF,gBAAYA,UADP;AAELE,eAAWA,SAFN;AAGLG,gBAAYA,UAHP;AAILG,gBAAYA,UAJP;AAKLC,gBAAYA,UALP;AAMLC,kBAAcA,YANT;AAOLd,2BAAuBA;;AAPlB,GAAP;AAYD,CAxLD;;;ACFA;;;;;;AAEA,eAAIjK,SAAJ,CAAc,YAAd,EAA4B,YAAY;AACpC,SAAO;AACLC,cAAU,GADL;AAEL+K,gBAAY,SAFP;AAGL9K,iBAAa,+CAHR;AAIL+K,aAAS,IAJJ;;AAML7K,gBAAY,oBAAUC,MAAV,EAAkB,CAE7B;AARI,GAAP;AAUD,CAXH;;;ACFA;;;;;;AAEA;AACA,eAAIL,SAAJ,CAAc,UAAd,EAA0B,YAAY;AAClC,SAAO;AACLC,cAAU,GADL;AAEL+K,gBAAY,SAFP;AAGL9K,iBAAa,6CAHR;AAIL+K,aAAS,IAJJ;;AAML7K,gBAAY,oBAAUC,MAAV,EAAkB,CAE7B;AARI,GAAP;AAUD,CAXH;;;ACHA;;;;;;AAEA,eAAID,UAAJ,CAAe,cAAf,EAA+B,UAASC,MAAT,EAAiBC,UAAjB,EAA6BC,SAA7B,EAAwCC,cAAxC,EAAwD0K,WAAxD,EAAqEC,oBAArE,EAA2F1K,WAA3F,EAAwGC,oBAAxG,EAA8H0K,kBAA9H,EAAkJC,SAAlJ,EAA6J;AAC1LhL,SAAOiL,OAAP,GAAiB;AACflK,WAAO,EADQ;AAEfwJ,iBAAa;AAFE,GAAjB;AAIAvK,SAAOkL,WAAP,GAAqB;AACnBnK,WAAO,EADY;AAEnBwJ,iBAAa;AAFM,GAArB;AAIAvK,SAAO0I,WAAP,GAAqB,EAArB;AACA1I,SAAOgG,aAAP,GAAuB,EAAvB;;AAGAhG,SAAOY,GAAP,CAAW,aAAX,EAA0B,UAAUC,KAAV,EAAiBgC,OAAjB,EAA0B;AACjDsI,gBAAY/K,YAAYgB,iBAAZ,EAAZ,EAA6CyB,OAA7C;AACF,GAFD;;AAIC,WAASsI,WAAT,CAAsBC,cAAtB,EAAsCvI,OAAtC,EAA+C;AAC9CxC,yBAAqBa,IAArB;AACA2J,gBAAYb,UAAZ,CAAuB5J,YAAYgB,iBAAZ,EAAvB,EAAwDyB,OAAxD,EACCxB,IADD,CACM,UAASC,MAAT,EAAgB;AACtBa,cAAQC,GAAR,CAAYd,MAAZ;AACAwJ,2BAAqBvD,YAArB,CAAkCjG,MAAlC;AACAtB,aAAOgG,aAAP,GAAuB8E,qBAAqBxC,gBAArB,EAAvB;AACAnG,cAAQC,GAAR,CAAYpC,OAAOgG,aAAnB;AACAqF,iBAAW,YAAU;AACnBhL,6BAAqB6B,IAArB;AACD,OAFD,EAEG,GAFH;AAGAlC,aAAO4B,MAAP;AACC,KAVD;AAYA;;AAGF5B,SAAOY,GAAP,CAAW,eAAX,EAA4B,UAAUC,KAAV,EAAiBgC,OAAjB,EAA0B;AACpD1C,mBAAeuB,iBAAf,CAAiCmB,OAAjC;AACAY,qBAAiBtD,eAAeuD,iBAAf,EAAjB;AACA4H;AACD,GAJD;;AAMAtL,SAAOuL,UAAP,GAAoB,UAAU7C,WAAV,EACpB;AACEzE,MAAE,yBAAF,EAA6BZ,QAA7B,CAAsC,QAAtC;AACAlB,YAAQC,GAAR,CAAY,QAAZ;AACApC,WAAOgG,aAAP,GAAuB8E,qBAAqBvC,MAArB,CAA4BG,WAA5B,CAAvB;AACA,QAAG,CAAC1I,OAAOgG,aAAP,CAAqB,CAArB,CAAJ,EACA;AACE/B,QAAE,yBAAF,EAA6Bd,WAA7B,CAAyC,QAAzC;AACD;AACF,GATD;;AAWE,WAASmI,eAAT,GACA;AACEnJ,YAAQC,GAAR,CAAY,iBAAZ;AACCpC,WAAOgG,aAAP,GAAuB8E,qBAAqBvD,YAArB,CAAkC9D,cAAlC,CAAvB;AACF;;AAED;AACAzD,SAAOqK,UAAP,GAAoB,UAAUnB,IAAV,EACpB;AACElJ,WAAOgB,OAAP,CAAeC,QAAf;AACAZ,yBAAqBa,IAArB;AACA2J,gBAAYR,UAAZ,CAAuBjK,YAAYgB,iBAAZ,EAAvB,EAAuDjB,eAAeuC,mBAAf,EAAvD,EAA6FwG,IAA7F,EACC7H,IADD,CACM,UAASC,MAAT,EAAgB;AACpBuJ,kBAAYX,SAAZ,CAAsB9J,YAAYgB,iBAAZ,EAAtB,EAAuDE,MAAvD,EACCD,IADD,CACM,UAASG,GAAT,EAAa;AACfsJ,6BAAqB7B,oBAArB,CAA0CzH,GAA1C;AACAxB,eAAOgG,aAAP,GAAuB8E,qBAAqBxC,gBAArB,EAAvB;AACAnG,gBAAQC,GAAR,CAAY,YAAZ,EAA0BpC,OAAOgG,aAAjC;AACA/F,mBAAWqD,UAAX,CAAsB,eAAtB;AACAtD,eAAO4B,MAAP;AACAvB,6BAAqB6B,IAArB;AACH,OARD;AAUD,KAZD;AAcD,GAlBD;;AAoBClC,SAAOwL,QAAP,GAAkB,UAAUzK,KAAV,EAAiBwJ,WAAjB,EACnB;;AAEEvK,WAAOkL,WAAP,GAAqB;AACnBnK,aAAOA,KADY;AAEnBwJ,mBAAaA;AAFM,KAArB;;AAKAvK,WAAOgB,OAAP,CAAesD,cAAf;AACD,GATA;;AAWDtE,SAAO0K,YAAP,GAAsB,UAAU7J,KAAV,EAAiBsJ,MAAjB,EACtB;AACEU,gBAAYH,YAAZ,CAAyBtK,YAAYgB,iBAAZ,EAAzB,EAA0D+I,MAA1D,EAAkE9I,IAAlE,CAAuE,UAAUC,MAAV,EAAiB;AACtF,UAAImK,aAAazL,OAAOgG,aAAP,CAAqB2B,MAAtC;AACA,WAAI,IAAIO,IAAI,CAAZ,EAAeA,IAAIuD,UAAnB,EAA+BvD,GAA/B,EACA;AACI,aAAI,IAAIwD,IAAI,CAAZ,EAAeA,IAAI1L,OAAOgG,aAAP,CAAqBkC,CAArB,EAAwBV,KAAxB,CAA8BG,MAAjD,EAAyD+D,GAAzD,EACA;AACE,cAAG1L,OAAOgG,aAAP,CAAqBkC,CAArB,EAAwBV,KAAxB,CAA8BkE,CAA9B,EAAiCjJ,EAAjC,IAAuC0H,MAA1C,EACA;AACCnK,mBAAOgG,aAAP,CAAqBkC,CAArB,EAAwBV,KAAxB,CAA8BwB,MAA9B,CAAqC0C,CAArC,EAAwC,CAAxC;AACA,gBAAG1L,OAAOgG,aAAP,CAAqBkC,CAArB,EAAwBV,KAAxB,CAA8BG,MAA9B,GAAqC,CAAxC,EACA;AACG3H,qBAAOgG,aAAP,CAAqBgD,MAArB,CAA4Bd,CAA5B,EAA+B,CAA/B;AACAuD,4BAAY,CAAZ;AACAxL,yBAAWqD,UAAX,CAAsB,eAAtB;AACA;AACF;AACDrD,uBAAWqD,UAAX,CAAsB,eAAtB;AACA;AACF;AACJ;;AAEDtD,aAAO4B,MAAP;AACD,KAtBD;AAwBD,GA1BD;AA4BH,CArHD;;;ACFA;;;;;;AAEA;AACA,eAAIjC,SAAJ,CAAc,UAAd,EAA0B,YAAY;AAClC,SAAO;AACLC,cAAU,GADL;AAEL+K,gBAAY,SAFP;AAGL9K,iBAAa,qCAHR;AAIL+K,aAAS,IAJJ;;AAML7K,gBAAY,oBAAUC,MAAV,EAAkB,CAE7B;AARI,GAAP;AAUD,CAXH;;;ACHA;;;;;;AAEA,eAAID,UAAJ,CAAe,iBAAf,EAAkC,UAASC,MAAT,EAAiBC,UAAjB,EAA6BG,WAA7B,EAA0C;AAC3E;AACAJ,QAAO0E,OAAP,GAAiB,EAAjB;AACA1E,QAAO2F,OAAP,GAAiB,EAAjB;;AAEA3F,QAAO2L,UAAP,GAAoB,UAAUhG,OAAV,EACpB;AACC3F,SAAO2F,OAAP,GAAiBA,OAAjB;AACA,EAHD;;AAKAvF,aAAYuE,UAAZ,GAAyBtD,IAAzB,CAA8B,UAAUC,MAAV,EAAkB;AAC/CtB,SAAO0E,OAAP,GAAiBpD,MAAjB;AACAa,UAAQC,GAAR,CAAY,eAAZ;AACA,SAAOhC,YAAYgF,YAAZ,CAAyB9D,MAAzB,CAAP;AACA,EAJD,EAIGD,IAJH,CAIQ,UAASC,MAAT,EAAgB;AACvBa,UAAQC,GAAR,CAAY,eAAZ;AACA,SAAOhC,YAAYsF,YAAZ,CAAyBpE,MAAzB,CAAP;AACA,EAPD,EAOGD,IAPH,CAOQ,UAASC,MAAT,EAAiB;AACxBtB,SAAO2L,UAAP,CAAkBrK,MAAlB;AACA;AACA;AACArB,aAAWqD,UAAX,CAAsB,aAAtB,EAAqCtD,OAAO0E,OAA5C;AACAzE,aAAWqD,UAAX,CAAsB,YAAtB,EAAoCtD,OAAO0E,OAA3C;AAEA,EAdD;AAgBA,CA1BD;;;ACDA;;;;;;AAEA,eAAI/E,SAAJ,CAAc,aAAd,EAA6B,YAAY;AACrC,SAAO;AACLC,cAAU,GADL;AAELC,iBAAa,yCAFR;AAGJC,WAAO,EAHH;AAMLC,gBAAY,oBAAUC,MAAV,EAAkB,CAE7B;;AARI,GAAP;AAWD,CAZH,GAHA;;;ACAA;;;;;;AAEA;AACE,eAAIL,SAAJ,CAAc,WAAd,EAA2B,YAAW;AACpC,SAAO;AACLC,cAAU,GADL;AAELgM,UAAM,cAAS9L,KAAT,EAAgBoD,OAAhB,EAAyB2I,KAAzB,EAA+B;;AAEnC,UAAIC,eAAe7H,EAAE,gBAAF,CAAnB,CAAuC;AACvC,UAAI8H,YAAY9H,EAAE,aAAF,CAAhB;AACA,UAAI+H,SAAS,KAAb;AACA,UAAIC,kBAAkB,IAAtB;;AAEA,eAASC,4BAAT,GAAwC;AACtC,YAAID,eAAJ,EACA;AACIA,4BAAkB,KAAlB;AACAZ,qBAAW,YAAY;AACrBY,8BAAkB,IAAlB;AACD,WAFD,EAEE,GAFF;AAGApL,gBAAMsL,cAAN;AACAH,mBAAS,CAACA,MAAV;AACF,cAAGA,MAAH,EACA;AACED,sBAAU5I,WAAV,CAAsB,YAAtB;AACA4I,sBAAU1I,QAAV,CAAmB,QAAnB;AACA0I,sBAAUK,IAAV,CAAe,OAAf,EAAwBC,KAAxB;AACA,WALF,MAOA;AACEN,sBAAU1I,QAAV,CAAmB,YAAnB;AACAgI,uBAAW,YAAY;AACvBU,wBAAU5I,WAAV,CAAsB,QAAtB;AACA4I,wBAAUK,IAAV,CAAe,OAAf,EAAwBE,GAAxB,CAA4B,EAA5B;AACC,aAHD,EAGG,GAHH;AAID;AACF,SAtBD,MAuBK;AAACnK,kBAAQC,GAAR,CAAY,aAAZ;AAA4B;AACnC;;AAED0J,mBAAaS,EAAb,CAAgB,OAAhB,EAAyB,YAAY;AACnCL;AACD,OAFD;;AAICH,gBAAUS,QAAV,CAAmB,UAAU3L,KAAV,EAAiB;AACnCqL;AACA,OAFD;AAGF;AA3CI,GAAP;AA8CD,CA/CD;;;ACHF;;;;;;AAEA;AACA,eAAInM,UAAJ,CAAe,aAAf,EAA8B,UAASC,MAAT,EAAiBC,UAAjB,EAA6BC,SAA7B,EAAwC;;AAErEF,SAAOwD,eAAP,GAAyB,EAAzB;;AAEA,MAAIzB,cAAc,SAAdA,WAAc,CAAUpB,QAAV,EAAoB;AACrCV,eAAWqD,UAAX,CAAsB,aAAtB,EAAqC3C,QAArC;AACA,GAFD;;AAIA,MAAIqB,gBAAgB,SAAhBA,aAAgB,GAAY;AAC/BG,YAAQC,GAAR,CAAY,eAAZ;AACAnC,eAAWqD,UAAX,CAAsB,eAAtB;AACA,GAHD;;AAKAtD,SAAOyM,qBAAP,GAA+B,UAASC,EAAT,EAAa;AACzCxM,cAAUgB,IAAV,CAAe;AACbnB,kBAAY4M,gBADC;AAEb9M,mBAAa,iDAFA;AAGbuD,cAAQpE,QAAQkE,OAAR,CAAgBF,SAAS4J,IAAzB,CAHK;AAIbC,mBAAaH,EAJA;AAKbI,2BAAoB,IALP;AAMbC,kBAAY/M,OAAOU;AANN,KAAf,EAQCW,IARD,CAQM,UAASgF,IAAT,EAAe2G,IAAf,EAAqB;AACzBhN,aAAOS,MAAP,GAAgB,mCAAmC,IAAnD;AAED,KAXD,EAWG,YAAW;AACZT,aAAOS,MAAP,GAAgB,2BAAhB;AACD,KAbD;AAcD,GAfF;;AAiBG,WAASkM,gBAAT,CAA0B3M,MAA1B,EAAkCE,SAAlC,EAA6C;AAC7CF,WAAOkC,IAAP,GAAc,YAAW;AACvBhC,gBAAUgC,IAAV;AACD,KAFD;;AAIAlC,WAAOiN,MAAP,GAAgB,YAAW;AACzB/M,gBAAU+M,MAAV;AACD,KAFD;AAGAjN,WAAOkN,MAAP,GAAgB,UAASvM,QAAT,EAAmB;;AAEjCoB,kBAAYpB,QAAZ;AACAT,gBAAUgC,IAAV,CAAe,QAAf;AAED,KALD;;AAOAlC,WAAOmN,aAAP,GAAuB,YAAW;AAChCnL;AACA9B,gBAAUgC,IAAV,CAAe,QAAf;AACD,KAHD;AAKD;;AAEDlC,SAAOoN,uBAAP,GAAiC,UAASV,EAAT,EAAa;AAC5CxM,cAAUgB,IAAV,CAAe;AACbnB,kBAAY4M,gBADC;AAEb9M,mBAAa,mDAFA;AAGbuD,cAAQpE,QAAQkE,OAAR,CAAgBF,SAAS4J,IAAzB,CAHK;AAIbC,mBAAaH,EAJA;AAKbI,2BAAqB,IALR;AAMbC,kBAAY/M,OAAOU;AANN,KAAf,EAQCW,IARD,CAQM,UAASgF,IAAT,EAAe2G,IAAf,EAAqB;AACzBhN,aAAOS,MAAP,GAAgB,mCAAmC,IAAnD;AAED,KAXD,EAWG,YAAW;AACZT,aAAOS,MAAP,GAAgB,2BAAhB;AACD,KAbD;AAcD,GAfD;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAED,CAvFD;;;ACHA;;;;;;AAEC,eAAId,SAAJ,CAAc,WAAd,EAA2B,YAAW;AACnC,SAAO;AACLC,cAAU,GADL;AAELgM,UAAM,cAAS9L,KAAT,EAAgBoD,OAAhB,EAAyB2I,KAAzB,EAA+B;AACnC,UAAIwB,UAAUrK,SAASsK,cAAT,CAAwB,cAAxB,CAAd;AACA,UAAIC,QAAQvK,SAASsK,cAAT,CAAwB,gBAAxB,CAAZ;;AAEA,UAAIE,cAAcxO,QAAQkE,OAAR,CAAgBmK,OAAhB,CAAlB;AACA;AACA,UAAII,WAAWxJ,EAAE,iBAAF,CAAf;AACA,UAAI+H,SAAS,KAAb;AACA,UAAIC,kBAAkB,IAAtB;AACAwB,eAASC,IAAT,CAAc,UAAd,EAAyB,CAAC,CAA1B;;AAEAD,eAASE,QAAT,GAAoBpB,EAApB,CAAuB,OAAvB,EAAgC,YAAY;AAC1CP,iBAAS,CAACA,MAAV;AACD,OAFD;;AAMAwB,kBAAYjB,EAAZ,CAAe,OAAf,EAAwB,UAAU1L,KAAV,EAAiB;AACvC,YAAIoL,eAAJ,EACA;AACEA,4BAAkB,KAAlB;AACAZ,qBAAW,YAAY;AACrBY,8BAAkB,IAAlB;AACD,WAFD,EAEE,GAFF;AAGApL,gBAAMsL,cAAN;AACAH,mBAAS,CAACA,MAAV;AACA,cAAGA,MAAH,EACA;;AAEEyB,qBAAStK,WAAT,CAAqB,YAArB;AACAsK,qBAASpK,QAAT,CAAkB,QAAlB;AACAoK,qBAASpB,KAAT;AACA,WANF,MAQA,CAEC;AACF,SAnBD,MAqBA;AACElK,kBAAQC,GAAR,CAAY,aAAZ;AACD;AAEF,OA1BD;;AA4BAqL,eAASjB,QAAT,CAAkB,UAAU3L,KAAV,EAAiB;AACjC,YAAIoL,eAAJ,EACA;AACIA,4BAAkB,KAAlB;AACAZ,qBAAW,YAAY;AACrBY,8BAAkB,IAAlB;AACD,WAFD,EAEE,GAFF;AAGApL,gBAAMsL,cAAN;AACAH,mBAAS,CAACA,MAAV;AACAyB,mBAASpK,QAAT,CAAkB,YAAlB;AACAgI,qBAAW,YAAY;AACrBoC,qBAAStK,WAAT,CAAqB,QAArB;AACC,WAFH,EAEK,GAFL;AAGH,SAZD,MAcA;AACEhB,kBAAQC,GAAR,CAAY,aAAZ;AACD;AAEF,OAnBD;AAuBD;AAtEI,GAAP;AAyED,CA1EF","file":"bundle.js","sourcesContent":["var app = angular.module('ProjectManagerApp', ['ngMaterial', 'ngMessages', 'ngCookies']);\r\n\r\napp.config(function ($mdThemingProvider, $httpProvider) {\r\n\r\n   var customPrimary = {\r\n        '50': '#b6b6cd',\r\n        '100': '#a7a7c3',\r\n        '200': '#9898b8',\r\n        '300': '#8989ae',\r\n        '400': '#7a7aa3',\r\n        '500': '#6b6b99',\r\n        '600': '#60608b',\r\n        '700': '#55557c',\r\n        '800': '#4b4b6d',\r\n        '900': '#40405e',\r\n        'A100': '#c6c6d7',\r\n        'A200': '#d5d5e2',\r\n        'A400': '#e4e4ec',\r\n        'A700': '#36364e'\r\n    };\r\n    $mdThemingProvider.definePalette('customPrimary', customPrimary);\r\n\r\n    $mdThemingProvider.theme('default')\r\n      .primaryPalette('customPrimary')\r\n      .accentPalette('red');\r\n  // delete $httpProvider.defaults.headers.post['Content-type']\r\n  // $httpProvider.defaults.useXDomain = true;\r\n  // $httpProvider.defaults.withCredentials = true;\r\n  // delete $httpProvider.defaults.headers.common[\"X-Requested-With\"];\r\n  // $httpProvider.defaults.headers.common[\"Accept\"] = \"application/json\";\r\n  // $httpProvider.defaults.headers.common[\"Content-Type\"] = \"application/json\";\r\n\r\n  });\r\n\r\nmodule.exports = app;","import app from './modules/main'\r\n\r\napp.directive('createProject', function () {\r\n    return {\r\n      restrict: 'EC',\r\n      templateUrl: './js/modules/ProjectList/create.project.dialog.html',\r\n      scope: {\r\n        \t\r\n      },\r\n      controller: function ($scope) {\r\n      \r\n      }\r\n    }\r\n  });","import app from './modules/main'\r\n\r\napp.directive('deleteProject', function () {\r\n    return {\r\n      restrict: 'EC',\r\n      templateUrl: './js/modules/ProjectList/delete.project.dialog.html',\r\n      scope: {\r\n        \t\r\n      },\r\n      controller: function ($scope) {\r\n      \r\n      }\r\n    }\r\n  });","import app from './modules/main'\r\n\r\napp.directive('editProject', function () {\r\n    return {\r\n      restrict: 'EC',\r\n      templateUrl: './js/modules/ProjectList/edit.project.dialog.html',\r\n      scope: {\r\n        \t\r\n      },\r\n      controller: function ($scope) {\r\n      \r\n      }\r\n    }\r\n  });","import app from './modules/main'\r\n\r\n// Project List\r\napp.controller('ProjectListCtrl', function($scope, $rootScope, $mdDialog, projectService, authService, loadingScreenService) {\r\n  // data\r\n  // $scope.projects = projectService.getProjects();\r\n\t$scope.projects = {\r\n    projects: [],\r\n    setProjects: function (projects) {\r\n      this.projects = projects;\r\n    }\r\n  };\r\n  $scope.firstTime = true;\r\n  $scope.status = '  ';\r\n  $scope.customFullscreen = false;\r\n  $scope.newTitle = \"\";\r\n\r\n  $scope.$on('getProjects', function (event) {\r\n    getProjects();\r\n  });\r\n\r\n  $scope.$on('createProject', function (event, title) {\r\n      $scope.$parent.untoggle();\r\n      loadingScreenService.show();\r\n      projectService.createProject(authService.getCurrentSession(), title)\r\n      .then(function(result){\r\n        projectService.fetchProject(authService.getCurrentSession(), result).then(function(res){\r\n          projectService.appendProject(res);\r\n          $scope.setCurrentProject(undefined, res);\r\n          $scope.$apply();\r\n        });\r\n\r\n      });\r\n  });\r\n\r\n  $scope.$on('taskIncrement', function (event) {\r\n    $scope.taskIncrement();\r\n  });\r\n\r\n  $scope.$on('taskDecrement', function (event) {\r\n    $scope.taskDecrement();\r\n  });\r\n\r\n   $scope.$on('editProject', function (event, newTitle) {\r\n    $scope.$parent.untoggle();\r\n    loadingScreenService.show();\r\n    projectService.editProject(authService.getCurrentSession(), newTitle)\r\n    .then(function (result) {\r\n      getProjects ();\r\n    });\r\n   });\r\n\r\n   $scope.$on('deleteProject', function (event) {\r\n    $scope.$parent.untoggle();\r\n    loadingScreenService.show();\r\n    projectService.deleteProject(authService.getCurrentSession())\r\n    .then(function (result) {\r\n      getProjects ();\r\n\r\n    });\r\n   });\r\n\r\n  function getProjects (){\r\n\r\n    projectService.getUserProjects(authService.getCurrentSession())\r\n    .then(function(result){\r\n\r\n      var projects = projectService.getProjects();\r\n\r\n      $scope.$apply(function () {\r\n\r\n      $scope.projects.setProjects(projects);\r\n      loadingScreenService.hide();\r\n      if($scope.firstTime)\r\n      {\r\n        $scope.firstTime = false;\r\n        $scope.setCurrentProject(undefined, $scope.projects.projects[0]);\r\n      }\r\n    });\r\n      console.log(\"new Projects\",$scope.projects.projects);\r\n    });\r\n\r\n  }\r\n\r\n  $scope.taskIncrement = function () {\r\n    $scope.projects.projects.forEach(function(elem, index, arr){\r\n      if(elem.id === projectService.getCurrentProjectId())\r\n        {\r\n          elem.task_count=parseInt(elem.task_count,10) + 1;\r\n        }\r\n    });\r\n  }\r\n\r\n  $scope.taskDecrement = function () {\r\n    $scope.projects.projects.forEach(function(elem, index, arr){\r\n      if(elem.id === projectService.getCurrentProjectId())\r\n        {\r\n          elem.task_count=parseInt(elem.task_count,10) - 1;\r\n        }\r\n    });\r\n  }\r\n\r\n  // Get projects\r\n  $scope.setCurrentProject = function (event, project) {\r\n    console.log(\"setCurrentProject\", project);\r\n    if(event)\r\n   {   \r\n       if(event.target)\r\n       {\r\n         var projectListElements = document.getElementsByClassName(\"current-project\");\r\n         angular.element(projectListElements).removeClass(\"current-project\");\r\n         angular.element(event.target).parent().addClass(\"current-project\");\r\n       }\r\n    }\r\n    projectService.setCurrentProject(project);\r\n    $rootScope.$broadcast('setCurrentProject');\r\n    $rootScope.$broadcast('setTaskList', project);\r\n    // $rootScope.$broadcast('switchProject', project);\r\n  };\r\n\r\n   \r\n\r\n} );","import app from './modules/main'\r\n\r\napp.controller('AppCtrl', function($scope, $rootScope, $timeout, projectService) {\r\n\r\n  $scope.newProjectTitle = '';\r\n  $scope.currentProject = {};\r\n\r\n  $scope.$on('setCurrentProject', function (event) {\r\n    $scope.currentProject=projectService.getCurrentProject();\r\n  });\r\n\r\n  $scope.closeRightSidenav = function () {\r\n    return function () {\r\n      console.log('closeRightSidenav');\r\n      var darkenTheScreen = angular.element( document.querySelector( '.darken-the-screen') );\r\n      var myNav = angular.element( document.querySelector( '.sidenav-open') );\r\n      myNav.removeClass('sidenav-open');\r\n      darkenTheScreen.addClass('fade-out');\r\n      $timeout(function(){\r\n        darkenTheScreen.removeClass('fade-out');\r\n        darkenTheScreen.addClass('hidden');\r\n      },180);\r\n\r\n    }\r\n  };\r\n\r\n  $scope.openRightSidenav = function (navID) {\r\n    return function () {\r\n      var darkenTheScreen = $('.darken-the-screen');\r\n      var myNav = $('#' + navID);\r\n      darkenTheScreen.removeClass('hidden');\r\n      myNav.addClass('sidenav-open');\r\n      }\r\n    }\r\n\r\n    $scope.createProject = function(title) {\r\n      $rootScope.$broadcast('createProject', title);\r\n    }\r\n\r\n    $scope.deleteProject = function(title) {\r\n      $rootScope.$broadcast('deleteProject');\r\n    }\r\n\r\n    $scope.editProject = function(newTitle) {\r\n      $rootScope.$broadcast('editProject', newTitle);\r\n    }\r\n \r\n  $scope.toggleCreateProject = $scope.openRightSidenav('create-project');\r\n  $scope.toggleDeleteProject = $scope.openRightSidenav('delete-project');\r\n  $scope.toggleEditProject = $scope.openRightSidenav('edit-project');\r\n  $scope.toggleCreateTask = $scope.openRightSidenav('create-task');\r\n  $scope.toggleOpenTask = $scope.openRightSidenav('open-task');\r\n\t$scope.untoggle = $scope.closeRightSidenav();\r\n\r\n\r\n\r\n});","import app from './modules/main'\r\n\r\napp.service('authService', function($http, $cookies) {\r\n\r\n\tvar session = \"\";\r\n\r\n\tvar getCurrentSession = function () {\r\n\t\treturn session;\r\n\t};\r\n\r\n\t\r\n\tvar getSession = function () {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tsession = $cookies.get('session');\r\n\t\t\tif(session)\r\n\t\t\t{\r\n\t\t\t\tconsole.log('Nice Cookies!');\r\n\t\t\t\tconsole.log(session);\r\n\t\t\t\tresolve(session);\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\t$http.post('https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/signup')\r\n\t\t\t\t\t.then(function(response) {\r\n\t\t        \t$cookies.put('session', response.data.session);\r\n\t\t        \tsession = response.data.session;\r\n\t\t        \tresolve(session);\r\n\t\t    \t\t})\r\n\t\t    \t\t.then(function(){\r\n\t\t    \t\t\tconsole.log('Failed to get session');\r\n\t\t    \t\t\treject('Failed to get session');\r\n\t\t    \t\t});\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t});\r\n\r\n\t};\r\n\r\n\tvar checkSession = function (session) {\r\n\r\n\t\treturn new Promise(function(resolve, reject){\r\n\t\t\tvar string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/session';\r\n\t\t\t$http({\r\n\t\t\t\turl: string,\r\n\t\t\t\tmethod: \"GET\",\r\n\t\t\t\twithCredentials: false,\r\n\t\t\t\tparams: {session: session}\r\n\t\t\t})\t\t\t\t\r\n\t\t\t.then(function(response){\r\n\t\t\t\tconsole.log('check result', response)\r\n\t\t\t\tif (response.status == 200) \r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.log('Session passed Checking');\r\n\t\t\t\t\tresolve(session);\r\n\t\t\t\t}\r\n\t\t\t\telse \r\n\t\t\t\t{\r\n\t\t\t\t\tconsole.log('Session check failed');\r\n\t\t\t\t\treject('Session check failed');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tvar fetchAccount = function(session) {\r\n\t\treturn new Promise(function(resolve, reject){\r\n\t\t\tconsole.log('session', session)\r\n\t\t\tvar account = {};\r\n\t\t\tvar string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/account';\r\n\t\t\t$http({\r\n\t\t\t\turl: string,\r\n\t\t\t\tmethod: 'GET',\r\n\t\t\t\tparams: {session: session}\r\n\t\t\t}).then(function(response){\r\n\t\t\t\taccount = response.data.Account;\r\n\t\t\t\tresolve(account);\r\n\t\t\t},function(err){\r\n\t\t\t\tconsole.log(\"Failed to fetch an account\")\r\n\t\t\t\treject(err);\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t};  \r\n\t\r\n\r\n\treturn {\r\n\t\tgetSession: getSession,\r\n\t\tgetCurrentSession: getCurrentSession,\r\n\t\tcheckSession: checkSession,\r\n\t\tfetchAccount: fetchAccount\r\n\r\n\t};\r\n});","import app from './modules/main'\r\nconst util = require('util')\r\n\r\napp.service('finalTaskListService', function() {\r\n\r\n  var finalTaskList = [];\r\n  var searchResults = [];\r\n\r\n  var sortByDateAsc = function (obj1, obj2) {\r\n\r\n    if (obj1.date > obj2.date) return 1;\r\n    if (obj1.date < obj2.date) return -1;\r\n    return 0;\r\n\r\n  };\r\n\r\n  var sortByDateDesc = function (obj1, obj2) {\r\n\r\n    if (obj1.date > obj2.date) return -1;\r\n    if (obj1.date < obj2.date) return 1;\r\n    return 0;\r\n\r\n  };\r\n  var formatDate = function (userDate) {\r\n    var date    = new Date(userDate),\r\n    yr      = date.getFullYear(),\r\n    month   = date.getMonth() < 10 ? '0' + date.getMonth() : date.getMonth(),\r\n    day     = date.getDate()  < 10 ? '0' + date.getDate()  : date.getDate(),\r\n    newDate = day + '.' + month + '.' + yr;\r\n    return newDate;\r\n  };\r\n\r\n  var getDayOfWeek = function (date) {\r\n    var string = \"\";\r\n    var now = moment();\r\n    var myDate = moment(date,\"YYYY-MM-DD +-HH:mm:ss\");\r\n\r\n    if (myDate.isSame(now,'day'))\r\n    {\r\n      string = \"Today\";\r\n      return string;\r\n    }\r\n    if (myDate.isSame(now.add(1, 'days'),'day'))\r\n    {\r\n      string = \"Tomorrow\";\r\n      return string;\r\n    }\r\n\r\n    var day = myDate.day();\r\n\r\n\r\n    switch (day) {\r\n      case 0:\r\n      string = \"Sunday\";\r\n      break;\r\n      case 1:\r\n      string = \"Monday\";\r\n      break;\r\n      case 2:\r\n      string = \"Tuesday\";\r\n      break;\r\n      case 3:\r\n      string = \"Wednesday\";\r\n      break;\r\n      case 4:\r\n      string = \"Thursday\";\r\n      break;\r\n      case 5:\r\n      string = \"Friday\";\r\n      break;\r\n      case 6:\r\n      string = \"Saturday\";\r\n      break;\r\n      default:\r\n      string = 'Потом' ;\r\n    }\r\n    return string;\r\n\r\n  };\r\n\r\n  var formTaskList = function (tasks) { // sorting based on date\r\n    \r\n    var days = [];\r\n    console.log('formTaskList');\r\n\r\n    for (var key = 0; key<tasks.length; key++) \r\n    {\r\n\r\n      if (days.length<1)\r\n      {\r\n        var day = new Object();\r\n        day.date = tasks[key].Task.created_at;\r\n        console.log('date',day.date);\r\n        day.tasks = [tasks[key].Task];\r\n        days.push(day);\r\n      }\r\n      else\r\n      {\r\n        var flag = false;\r\n        for (var taskListKey = 0; taskListKey<days.length; taskListKey++)\r\n        {\r\n          if(moment(days[taskListKey].date).isSame(moment(tasks[key].Task.created_at),'day'))\r\n          {\r\n            days[taskListKey].tasks.push(tasks[key].Task);\r\n            flag = true;\r\n          }\r\n        }\r\n        if(flag)\r\n        {\r\n          continue;\r\n        }\r\n        var day = new Object();\r\n        day.date = tasks[key].Task.created_at;\r\n        day.tasks = [tasks[key].Task];\r\n\r\n        days.push(day);\r\n\r\n      }\r\n    }\r\n    // days.sort(sortByDateAsc);\r\n    for (var i = 0; i < days.length; i++)\r\n    {\r\n      days[i].dayOfWeek = getDayOfWeek(days[i].date);\r\n      days[i].date = moment(days[i].date,\"YYYY-MM-DD +-HH:mm:ss\").format(\"DD.MM.YYYY\");\r\n      // days[i].tasks.reverse();\r\n    }\r\n\r\n      searchResults = angular.copy(days);\r\n      \r\n      console.log('searchResults', searchResults);\r\n      finalTaskList = days;\r\n\r\n      return true;\r\n\r\n    };\r\n\r\n    var getFinalTaskList = function () {\r\n      return finalTaskList;\r\n    };\r\n\r\n    var search = function (searchText) {\r\n      searchResults = angular.copy(finalTaskList);\r\n      if(searchText=='')\r\n      {\r\n       return searchResults;\r\n      }\r\n       function CustomSearch(searchQuery, element) \r\n       {\r\n           // var regexp = new RegExp(searchText, \"i\");\r\n           var regexp = new RegExp(searchText, \"i\");\r\n           var res = -1;\r\n           for(var key in element)\r\n           {\r\n            if(key!='image')\r\n              {\r\n                // console.log('element[key] ', element[key]);\r\n                if(util.isString(element[key]))\r\n               { \r\n                res = element[key].search(regexp);\r\n                if(res>-1)\r\n                {\r\n                  return true;\r\n                }\r\n              }\r\n              }\r\n           }\r\n           \r\n           return false;\r\n         }\r\n\r\n      for(let i = 0; i < searchResults.length; i++)\r\n      {\r\n        console.log('searchResults' + i, searchResults[i]);\r\n        searchResults[i].tasks = searchResults[i].tasks.filter(CustomSearch.bind(this,searchText));\r\n        if(!searchResults[i].tasks[0])\r\n        {\r\n          searchResults.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n      return searchResults;\r\n    };\r\n\r\n    var postCreateAppendTask = function (task) {\r\n      let now = new Date();\r\n      let dayOfWeek = getDayOfWeek(now);\r\n      let date = moment(now, \"YYYY-MM-DD +-HH:mm:ss\").format(\"DD.MM.YYYY\");\r\n      for (let i = 0; i< finalTaskList.length; i++)\r\n      {\r\n        if(finalTaskList[i].date===date)\r\n          {\r\n            finalTaskList[i].tasks.unshift(task);\r\n            return true;\r\n          }\r\n      }\r\n      let day = new Object();\r\n      day.date = date;\r\n      day.tasks = [task];\r\n      day.dayOfWeek = dayOfWeek;\r\n      finalTaskList.unshift(day);\r\n    };\r\n\r\n\r\n    var appendTask = function (task) {\r\n\r\n        let flag = true;\r\n        let date = moment(task.created_at, \"YYYY-MM-DD +-HH:mm:ss\").format(\"DD.MM.YYYY\");\r\n        \r\n        for (let i = 0; i< finalTaskList.length; i++)\r\n        {\r\n          if(finalTaskList[i].date===date)\r\n            {\r\n              finalTaskList[i].tasks.push(task);\r\n              flag = false;\r\n              break;\r\n            }\r\n        }\r\n        if (flag)\r\n        {\r\n          let day = new Object();\r\n          day.date = date;\r\n          day.tasks = [task];\r\n          day.dayOfWeek = getDayOfWeek(task.created_at);\r\n          finalTaskList.push(day);\r\n        }\r\n      };\r\n\r\n    var appendNewTasks = function (tasks)\r\n    {\r\n\r\n      for (let i = 0; i < tasks.length; i++)\r\n      {\r\n        appendTask(tasks[i].Task);\r\n      }\r\n\r\n    };\r\n\r\n\r\n    return {\r\n      formTaskList: formTaskList,\r\n      getFinalTaskList: getFinalTaskList,\r\n      search: search,\r\n      postCreateAppendTask: postCreateAppendTask,\r\n      appendNewTasks: appendNewTasks,\r\n      getDayOfWeek: getDayOfWeek,\r\n      formatDate: formatDate\r\n\r\n    };\r\n  } )","import app from './modules/main'\r\n\r\napp.service('loadingScreenService', function() {\r\n\t\tvar show = function () {\r\n\t\t\t$('body').addClass('unscrollable');\r\n\t\t\t$('.loading-screen').removeClass('hidden');\r\n\t\t};\r\n\r\n\t\tvar hide = function () {\r\n\t\t\t$('body').removeClass('unscrollable');\r\n\t\t\t$('.loading-screen').addClass('hidden');\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tshow: show,\r\n\t\t\thide: hide\r\n\t\t}\r\n\t}\r\n)","import app from './modules/main'\r\n\r\napp.service('loadingTaskService', function() {\r\n\t\tvar show = function () {\r\n\t\t\t$('.loading-circle').removeClass('hidden');\r\n\t\t};\r\n\r\n\t\tvar hide = function () {\r\n\t\t\t$('.loading-circle').addClass('hidden');\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tshow: show,\r\n\t\t\thide: hide\r\n\t\t}\r\n\t}\r\n)","import app from './modules/main'\r\n\r\napp.service('projectService', function($http) {\r\n\r\n  var projectList = [];\r\n\r\n  var createProject = function (session, title)\r\n  {\r\n    console.log(\"session:\", session, \"title:\", title);\r\n    return new Promise(function(resolve, reject){\r\n      var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/projects/project';\r\n      $http({\r\n        url: string,\r\n        method: 'POST',\r\n        data: {session: session, Project: {title: title}},\r\n        headers: {'Content-Type': 'application/json'}\r\n      })        \r\n      .then(function(response){\r\n        console.log('check result', response)\r\n        if (response.status == 201) \r\n        {\r\n          console.log('Project created');\r\n          resolve(response.data.Project.id);\r\n        }\r\n        else \r\n        {\r\n          console.log('Project creation failed', response.status);\r\n          reject('Project creation failed');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  var fetchProject = function (session, id)\r\n  {\r\n    console.log(\"session: \", session, \"id: \", id);\r\n    return new Promise(function(resolve, reject){\r\n      var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/projects/project';\r\n      $http({\r\n        url: string,\r\n        method: 'GET',\r\n        params: {session: session, project_id: id},\r\n        headers: {'Content-Type': 'application/json'}\r\n      })        \r\n      .then(function(response){\r\n        console.log('check result', response)\r\n        if (response.status == 200) \r\n        {\r\n          console.log('Project fetched');\r\n          resolve(response.data.Project);\r\n        }\r\n        else \r\n        {\r\n          console.log('Project creation failed', response.status);\r\n          reject('Project creation failed');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  var editProject = function (session, title)\r\n  {\r\n    console.log(\"session:\", session, \"title:\", title);\r\n    return new Promise(function(resolve, reject){\r\n      var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/projects/project';\r\n      $http({\r\n        url: string,\r\n        method: 'POST',\r\n        data: {session: session, Project: {id: currentProject.id, title: title}},\r\n        headers: {'Content-Type': 'application/json'}\r\n      })        \r\n      .then(function(response){\r\n        console.log('check result', response)\r\n        if (response.status == 200) \r\n        {\r\n          console.log('Project has been updated');\r\n          resolve(\"success\");\r\n        }\r\n        else \r\n        {\r\n          console.log('Project update failed', response.status);\r\n          reject('Project update failed');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n   var deleteProject = function (session)\r\n  {\r\n    console.log(\"Delete project:\", currentProject.id);\r\n    return new Promise(function(resolve, reject){\r\n      var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/projects/project';\r\n      $http({\r\n        url: string,\r\n        method: 'DELETE',\r\n        params: {session: session, project_id: currentProject.id}\r\n      })        \r\n      .then(function(response){\r\n        console.log('check result', response)\r\n        if (response.status == 200) \r\n        {\r\n          console.log('Project has been deleted');\r\n          resolve(\"success\");\r\n        }\r\n        else \r\n        {\r\n          console.log('Project removal failed', response.status);\r\n          reject('Project removal failed');\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  var currentProject = {};\r\n\r\n\r\n  var setCurrentProject = function (project)\r\n  {\r\n    currentProject = project;\r\n    console.log('currentProjectId: ', currentProject);\r\n  }\r\n\r\n  var getCurrentProjectId = function ()\r\n  {\r\n    return currentProject.id;\r\n  }\r\n\r\n  var getCurrentProject = function ()\r\n  {\r\n    return currentProject;\r\n  }\r\n\r\n  var appendProject = function(project) {\r\n    projectList.unshift(project);\r\n  };\r\n\r\n  var getProjects = function(){\r\n      return projectList;\r\n  };\r\n\r\n  var getUserProjects = function (session) {\r\n    return new Promise(function(resolve, reject){\r\n      var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/projects';\r\n      $http({\r\n        url: string,\r\n        method: \"GET\",\r\n        params: {session: session}\r\n      })        \r\n      .then(function(response){\r\n        console.log('Initial projects', response)\r\n        if (response.status == 200) \r\n        {\r\n          console.log('Projects fetched successfully');\r\n          projectList = response.data.projects.map(function (object) {\r\n            return object.Project;\r\n          });\r\n          resolve(\"Success\");\r\n        }\r\n        else \r\n        {\r\n          console.log('Projects fetching failed');\r\n          reject('Projects fetching');\r\n        }\r\n      });\r\n    });\r\n  };\r\n\r\n\r\n  return {\r\n    getUserProjects: getUserProjects,\r\n    createProject: createProject,\r\n    fetchProject: fetchProject,\r\n    editProject: editProject,\r\n    deleteProject: deleteProject,\r\n    appendProject: appendProject,\r\n    getProjects: getProjects,\r\n    setCurrentProject: setCurrentProject,\r\n    getCurrentProjectId: getCurrentProjectId,\r\n    getCurrentProject: getCurrentProject\r\n\r\n\r\n  };\r\n\r\n});","import app from './modules/main'\r\n\r\napp.service('taskService', function($http) {\r\n\r\n  // delete $http.defaults.headers.common['X-Requested-With'];\r\n  // var paging_size = 5;\r\n  // var paging_offset = 0;\r\n\r\n  var incrementPagingOffset = function () {\r\n    paging_offset=paging_offset+5;\r\n  }\r\n\r\n  var addTask = function(currentProject, newObj) {\r\n    currentProject.tasks.push(newObj);\r\n  };\r\n\r\n  var fetchTasks = function(session, project){\r\n\r\n    console.log(\"Fetching tasks\");\r\n\r\n      return new Promise(function(resolve, reject){\r\n        var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/tasks';\r\n        $http({\r\n          url: string,\r\n          method: \"GET\",\r\n          params: {session: session, project_id: project.id, paging_size: project.task_count, paging_offset: 0}\r\n        })        \r\n        .then(function(response){\r\n          console.log('tasks for project', response.data.tasks)\r\n          if (response.status == 200) \r\n          {\r\n            console.log('Tasks Fetched', response.data);\r\n            resolve(response.data.tasks);\r\n          }\r\n          else \r\n          {\r\n            console.log('Tasks fetching failed');\r\n            reject('Tasks fetchingfailed');\r\n          }\r\n        });\r\n      });\r\n  };\r\n\r\n  var fetchTask = function(session, taskId){\r\n\r\n      return new Promise(function(resolve, reject){\r\n        var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/tasks/task';\r\n        $http({\r\n          url: string,\r\n          method: \"GET\",\r\n          params: {session: session, task_id: taskId},\r\n          headers: {'Content-Type': 'application/json'}\r\n        })        \r\n        .then(function(response){\r\n          console.log('Fetched task', response.data.Task)\r\n          if (response.status == 200) \r\n          {\r\n            console.log('Task Fetched');\r\n            resolve(response.data.Task);\r\n          }\r\n          else \r\n          {\r\n            console.log('Task Fetching failed');\r\n            reject('Task Fetching failed');\r\n          }\r\n        });\r\n      });\r\n  };\r\n\r\n  var createTask = function(session, projectId, task){\r\n\r\n      return new Promise(function(resolve, reject){\r\n        var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/tasks/task';\r\n        console.log(session);\r\n      $http({\r\n        url: string,\r\n        method: 'POST',\r\n        data: {session: session, Project: {id: projectId}, Task: {title: task.title, description: task.description}},\r\n        headers: {'Content-Type': 'application/json'}\r\n      }).then(function(response){\r\n          console.log('Created task', response.data)\r\n          if (response.status == 201) \r\n          {\r\n            console.log('Task created',response.data);\r\n            resolve(response.data.Task.id);\r\n          }\r\n          else \r\n          {\r\n            console.log('Task creation failed');\r\n            reject('Task creation failed');\r\n          }\r\n        },function(response){\r\n          console.log('Fa',response);\r\n        });\r\n    });\r\n  };\r\n\r\n  var updateTask = function(session, taskId, title, description){\r\n\r\n      return new Promise(function(resolve, reject){\r\n        var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/tasks/task';\r\n        $http({\r\n          url: string,\r\n          method: \"POST\",\r\n          params: {Task: {id: taskId, title: title, description: description}},\r\n          headers: { 'Content-Type': 'application/json' }    \r\n        })        \r\n        .then(function(response){\r\n          console.log('Updated task', response.data)\r\n          if (response.status == 200) \r\n          {\r\n            console.log('Updated created');\r\n            resolve(response.data.Task);\r\n          }\r\n          else \r\n          {\r\n            console.log('Task update failed');\r\n            reject('Task update failed');\r\n          }\r\n        });\r\n      });\r\n  };\r\n\r\n   var deleteTask = function(session, taskId) {\r\n\r\n      return new Promise(function(resolve, reject){\r\n        var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/tasks/task';\r\n        $http({\r\n          url: string,\r\n          method: \"DELETE\",\r\n          params: {session: session, task_id: taskId},\r\n        })        \r\n        .then(function(response){\r\n          console.log('Updated task', response.data)\r\n          if (response.status == 200) \r\n          {\r\n            console.log('Updated created');\r\n            resolve(response.data.Task);\r\n          }\r\n          else \r\n          {\r\n            console.log('Task update failed');\r\n            reject('Task update failed');\r\n          }\r\n        });\r\n      });\r\n  };\r\n\r\n  var completeTask = function (session, taskId) {\r\n\r\n    return new Promise(function(resolve, reject){\r\n        var string = 'https://private-anon-ba926edde6-testfrontend1.apiary-proxy.com/tasks/task/complite';\r\n        $http({\r\n          url: string,\r\n          method: \"POST\",\r\n          data: {session: session, Task: {id: parseInt(taskId)}},\r\n          headers: { 'Content-Type': 'application/json' }\r\n        })        \r\n        .then(function(response){\r\n          if (response.status == 200) \r\n          {\r\n            console.log('Task complete');\r\n            resolve(response);\r\n          }\r\n          else \r\n          {\r\n            console.log('Complete failed');\r\n            reject('Complete failed');\r\n          }\r\n        });\r\n      });\r\n\r\n  }\r\n\r\n  return {\r\n    fetchTasks: fetchTasks,\r\n    fetchTask: fetchTask,\r\n    createTask: createTask,\r\n    updateTask: updateTask,\r\n    deleteTask: deleteTask,\r\n    completeTask: completeTask,\r\n    incrementPagingOffset: incrementPagingOffset\r\n\r\n\r\n  };\r\n\r\n});","import app from './modules/main'\r\n\r\napp.directive('createTask', function () {\r\n    return {\r\n      restrict: 'E',\r\n      transclude: 'element',\r\n      templateUrl: './js/modules/TaskList/create.task.dialog.html',\r\n      replace: true,\r\n     \r\n      controller: function ($scope) {\r\n      \r\n      }\r\n    }\r\n  });","import app from './modules/main'\r\n\r\n// Task List\r\napp.directive('openTask', function () {\r\n    return {\r\n      restrict: 'E',\r\n      transclude: 'element',\r\n      templateUrl: './js/modules/TaskList/open.task.dialog.html',\r\n      replace: true,\r\n      \r\n      controller: function ($scope) {\r\n      \r\n      }\r\n    }\r\n  });","import app from './modules/main'\r\n\r\napp.controller('TaskListCtrl', function($scope, $rootScope, $mdDialog, projectService, taskService, finalTaskListService, authService, loadingScreenService, loadingTaskService, $location) {\r\n  $scope.newTask = {\r\n    title: \"\",\r\n    description: \"\"\r\n  };\r\n  $scope.currentTask = {\r\n    title: \"\",\r\n    description: \"\"\r\n  };  \r\n  $scope.searchQuery = \"\";\r\n  $scope.finalTaskList = [];\r\n\r\n\r\n  $scope.$on('setTaskList', function (event, project) {\r\n     setTaskList(authService.getCurrentSession(), project);\r\n  })\r\n\r\n   function setTaskList (currentSession, project) {\r\n    loadingScreenService.show();\r\n    taskService.fetchTasks(authService.getCurrentSession(), project)\r\n    .then(function(result){\r\n    console.log(result);\r\n    finalTaskListService.formTaskList(result);\r\n    $scope.finalTaskList = finalTaskListService.getFinalTaskList();\r\n    console.log($scope.finalTaskList);\r\n    setTimeout(function(){\r\n      loadingScreenService.hide();\r\n    }, 300)\r\n    $scope.$apply();\r\n    });\r\n\r\n   };\r\n   \r\n\r\n  $scope.$on('switchProject', function (event, project) {\r\n    projectService.setCurrentProject(project);\r\n    currentProject = projectService.getCurrentProject();\r\n    formListForShow();\r\n  });\r\n\r\n  $scope.searchTask = function (searchQuery)\r\n  {\r\n    $('.match-not-found-screen').addClass('hidden');\r\n    console.log('search');\r\n    $scope.finalTaskList = finalTaskListService.search(searchQuery);\r\n    if(!$scope.finalTaskList[0])\r\n    {\r\n      $('.match-not-found-screen').removeClass('hidden');\r\n    }\r\n  }\r\n\r\n    function formListForShow ()\r\n    {\r\n      console.log(\"formListForShow\");\r\n       $scope.finalTaskList = finalTaskListService.formTaskList(currentProject);\r\n    }\r\n\r\n    // push task into current project\r\n    $scope.createTask = function (task)\r\n    {\r\n      $scope.$parent.untoggle();\r\n      loadingScreenService.show();\r\n      taskService.createTask(authService.getCurrentSession(),projectService.getCurrentProjectId(), task)\r\n      .then(function(result){\r\n        taskService.fetchTask(authService.getCurrentSession(), result)\r\n        .then(function(res){\r\n            finalTaskListService.postCreateAppendTask(res);\r\n            $scope.finalTaskList = finalTaskListService.getFinalTaskList();\r\n            console.log('final List', $scope.finalTaskList);\r\n            $rootScope.$broadcast('taskIncrement');\r\n            $scope.$apply();\r\n            loadingScreenService.hide();\r\n        });\r\n        \r\n      });\r\n       \r\n    }\r\n\r\n     $scope.openTask = function (title, description)\r\n    { \r\n      \r\n      $scope.currentTask = {\r\n        title: title,\r\n        description: description\r\n      };\r\n      \r\n      $scope.$parent.toggleOpenTask();\r\n    }\r\n\r\n    $scope.completeTask = function (event, taskId)\r\n    {\r\n      taskService.completeTask(authService.getCurrentSession(), taskId).then(function (result){\r\n        let listLength = $scope.finalTaskList.length;\r\n        for(let i = 0; i < listLength; i++)\r\n        {\r\n            for(let j = 0; j < $scope.finalTaskList[i].tasks.length; j++)\r\n            {\r\n              if($scope.finalTaskList[i].tasks[j].id == taskId)\r\n              {\r\n               $scope.finalTaskList[i].tasks.splice(j, 1);\r\n               if($scope.finalTaskList[i].tasks.length<1)\r\n               {\r\n                  $scope.finalTaskList.splice(i, 1);\r\n                  listLength-=1;\r\n                  $rootScope.$broadcast('taskDecrement');\r\n                  break;\r\n               }\r\n               $rootScope.$broadcast('taskDecrement');\r\n              }\r\n            }\r\n        }\r\n      \r\n        $scope.$apply();\r\n      });\r\n\r\n    }\r\n\r\n} );\r\n","import app from './modules/main'\r\n\r\n// Task List\r\napp.directive('taskList', function () {\r\n    return {\r\n      restrict: 'E',\r\n      transclude: 'element',\r\n      templateUrl: './js/modules/TaskList/taskList.html',\r\n      replace: true,\r\n      \r\n      controller: function ($scope) {\r\n      \r\n      }\r\n    }\r\n  });","import app from './modules/main'\r\n\r\napp.controller('userProfileCtrl', function($scope, $rootScope, authService) {\r\n\t// Begin getting Session\r\n\t$scope.session = \"\";\r\n\t$scope.account = {};\r\n\r\n\t$scope.setAccount = function (account)\r\n\t{\r\n\t\t$scope.account = account;\r\n\t};\r\n\r\n\tauthService.getSession().then(function (result) {\r\n\t\t$scope.session = result;\r\n\t\tconsole.log(\"session check\");\r\n\t\treturn authService.checkSession(result);\r\n\t}).then(function(result){\r\n\t\tconsole.log(\"fetch account\");\r\n\t\treturn authService.fetchAccount(result);\r\n\t}).then(function(result) {\r\n\t\t$scope.setAccount(result);\r\n\t\t// $scope.$apply();\r\n\t\t// console.log('apply');\r\n\t\t$rootScope.$broadcast('getProjects', $scope.session);\r\n\t\t$rootScope.$broadcast('setSession', $scope.session);\r\n\t\t\r\n\t});\r\n\t\r\n});","// User Profile \r\nimport app from \"./modules/main\"\r\n\r\napp.directive('userProfile', function () {\r\n    return {\r\n      restrict: 'E',\r\n      templateUrl: './js/modules/User/userProfile.tmpl.html',\r\n       scope: {\r\n        \r\n      },\r\n      controller: function ($scope) {\r\n      \r\n      }\r\n\r\n    }\r\n  });","import app from './modules/main'\r\n\r\n// Seach Bar\r\n  app.directive('searchBar', function() {\r\n    return {\r\n      restrict: 'E',\r\n      link: function(scope, element, attrs){\r\n\r\n        var searchButton = $(\"#search-button\");;\r\n        var searchBar = $(\"#search-bar\");\r\n        var active = false;\r\n        var clickPermission = true;\r\n\r\n        function activateDisactivateSearchBar() {\r\n          if (clickPermission)\r\n          {\r\n              clickPermission = false;\r\n              setTimeout(function () {\r\n                clickPermission = true;\r\n              },200);\r\n              event.preventDefault();\r\n              active = !active;\r\n            if(active)\r\n            {\r\n              searchBar.removeClass('not-active');\r\n              searchBar.addClass('active');\r\n              searchBar.find(\"input\").focus();\r\n             }\r\n            else\r\n            {\r\n              searchBar.addClass('not-active');\r\n              setTimeout(function () {\r\n              searchBar.removeClass('active');\r\n              searchBar.find(\"input\").val(\"\");\r\n              }, 200);\r\n            }\r\n          }\r\n          else {console.log(\"doubleClick\");}\r\n        }\r\n\r\n        searchButton.on('click', function () {\r\n          activateDisactivateSearchBar()\r\n        });\r\n\r\n         searchBar.focusout(function (event) {\r\n          activateDisactivateSearchBar()\r\n         });\r\n      }\r\n    };\r\n\r\n  });","import app from './modules/main'\r\n\r\n// Project List\r\napp.controller('toolbarCtrl', function($scope, $rootScope, $mdDialog) {\r\n\r\n\t$scope.newProjectTitle = \"\";\r\n\r\n\tvar editProject = function (newTitle) {\r\n\t\t$rootScope.$broadcast('editProject', newTitle);\r\n\t};\r\n\r\n\tvar deleteProject = function () {\r\n\t\tconsole.log(\"deleteProject\");\r\n\t\t$rootScope.$broadcast('deleteProject');\r\n\t};\r\n\r\n\t$scope.showEditProjectDialog = function(ev) {\r\n    $mdDialog.show({\r\n      controller: DialogController,\r\n      templateUrl: 'js/modules/ProjectList/edit.project.dialog.html',\r\n      parent: angular.element(document.body),\r\n      targetEvent: ev,\r\n      clickOutsideToClose:true,\r\n      fullscreen: $scope.customFullscreen \r\n    })\r\n    .then(function(date, text) {\r\n      $scope.status = 'You said the information was \"' + '\".';\r\n\r\n    }, function() {\r\n      $scope.status = 'You cancelled the dialog.';\r\n    });\r\n  };  \r\n\r\n    function DialogController($scope, $mdDialog) {\r\n    $scope.hide = function() {\r\n      $mdDialog.hide();\r\n    };\r\n\r\n    $scope.cancel = function() {\r\n      $mdDialog.cancel();\r\n    };\r\n    $scope.answer = function(newTitle) {\r\n\r\n      editProject(newTitle);\r\n      $mdDialog.hide(\"answer\");\r\n\r\n    };\r\n\r\n    $scope.confirmDelete = function() {\r\n      deleteProject();\r\n      $mdDialog.hide(\"answer\");\r\n    };\r\n\r\n  }\r\n\r\n  $scope.showDeleteProjectDialog = function(ev) {\r\n    $mdDialog.show({\r\n      controller: DialogController,\r\n      templateUrl: 'js/modules/ProjectList/delete.project.dialog.html',\r\n      parent: angular.element(document.body),\r\n      targetEvent: ev,\r\n      clickOutsideToClose: true,\r\n      fullscreen: $scope.customFullscreen \r\n    })\r\n    .then(function(date, text) {\r\n      $scope.status = 'You said the information was \"' + '\".';\r\n\r\n    }, function() {\r\n      $scope.status = 'You cancelled the dialog.';\r\n    });\r\n  };\r\n\r\n  // $scope.showDeleteConfirm = function(ev) {\r\n  //   // Appending dialog to document.body to cover sidenav in docs app\r\n  //   var confirm = $mdDialog.confirm()\r\n  //         .title('You are trying to delete your project?')\r\n  //         .textContent('Your project will be comletely deleted.')\r\n  //         .ariaLabel('Delete project')\r\n  //         .targetEvent(ev)\r\n  //         .ok('Please do it!')\r\n  //         .cancel('No. Why would i do that?');\r\n\r\n  //   $mdDialog.show(confirm).then(function() {\r\n  //   \tdeleteProject();\r\n  //     $scope.status = 'You decided to get rid of your project.';\r\n  //   }, function() {\r\n  //     $scope.status = 'You decided to keep your project.';\r\n  //   });\r\n  // };\r\n\r\n});","import app from './modules/main'\r\n\r\n app.directive('toolsMenu', function() {\r\n    return {\r\n      restrict: 'E',\r\n      link: function(scope, element, attrs){\r\n        var tButton = document.getElementById(\"tools-button\");\r\n        var dMenu = document.getElementById(\"drop-down-menu\");\r\n\r\n        var toolsButton = angular.element(tButton);\r\n        // var dropMenu = angular.element(dMenu);\r\n        var dropMenu = $(\"#drop-down-menu\");\r\n        var active = false;\r\n        var clickPermission = true;\r\n        dropMenu.attr('tabindex',-1);\r\n\r\n        dropMenu.children().on('click', function () {\r\n          active = !active;\r\n        });\r\n\r\n\r\n\r\n        toolsButton.on('click', function (event) {\r\n          if (clickPermission)\r\n          {\r\n            clickPermission = false;\r\n            setTimeout(function () {\r\n              clickPermission = true;\r\n            },200);\r\n            event.preventDefault();\r\n            active = !active;\r\n            if(active)\r\n            {\r\n\r\n              dropMenu.removeClass('not-active');\r\n              dropMenu.addClass('active');\r\n              dropMenu.focus();\r\n             }\r\n            else\r\n            {\r\n\r\n            }\r\n          }\r\n          else\r\n          {\r\n            console.log(\"doubleClick\");\r\n          }\r\n          \r\n        });\r\n\r\n        dropMenu.focusout(function (event) {\r\n          if (clickPermission)\r\n          { \r\n              clickPermission = false;\r\n              setTimeout(function () {\r\n                clickPermission = true;\r\n              },200);\r\n              event.preventDefault();\r\n              active = !active;\r\n              dropMenu.addClass('not-active');\r\n              setTimeout(function () {\r\n                dropMenu.removeClass('active');\r\n                }, 200);\r\n          }\r\n          else\r\n          {\r\n            console.log(\"doubleClick\");\r\n          }\r\n          \r\n        });\r\n\r\n\r\n\r\n      }\r\n    };\r\n\r\n  });"]}